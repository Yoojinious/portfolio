<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Yoojin Park — Interactive Portfolio</title>
<meta name="description" content="Futuristic, fullpage, responsive, interactive portfolio with sticky menu and progress bar." />
<!-- Futuristic fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400..900&family=Space+Grotesk:wght@300..700&display=swap" rel="stylesheet">
<!-- 3D Globe dependencies -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<!-- Theme bootstrap: set data-theme early to avoid FOUC -->
<script>
  (function(){
    try{
      var saved = localStorage.getItem('theme');
      var prefersLight = window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches;
      var theme = saved || (prefersLight ? 'light' : 'dark');
      document.documentElement.setAttribute('data-theme', theme);
    }catch(e){ /* noop */ }
  })();
  </script>
<style>
  :root{
    --bg:#0b0b10; --text:#f8fafc; --muted:#a1a1aa; --card:rgba(255,255,255,.06);
    --border:rgba(255,255,255,.12); --ring:#a3a3a3;
  --accent1:#7c7cff; --accent2:#ff6ad5; --accent3:#47e7ff; --accent4:#16f2b3; --accent5:#facc15; --accent6:#fb923c;
    --shadow: 0 20px 50px rgba(0,0,0,.35);
    --radius: 22px;
    --ease: cubic-bezier(.22,.61,.36,1);
    --nav-h: 64px;
  }
  /* Explicit theme overrides via attribute */
  :root[data-theme="dark"]{
    /* Default matches base :root; kept for clarity */
  --bg:#0b0b10; --text:#f8fafc; --muted:#a1a1aa; --card:rgba(255,255,255,.06);
  --border:rgba(255,255,255,.12); --ring:#a3a3a3;
  --accent1:#7c7cff; --accent2:#ff6ad5; --accent3:#47e7ff; --accent4:#16f2b3; --accent5:#facc15; --accent6:#fb923c;
    --shadow: 0 20px 50px rgba(0,0,0,.35);
  }
  :root[data-theme="light"]{
  --bg:#ffffff; --text:#0b0b10; --muted:#52525b; --card:rgba(0,0,0,.04);
  --border:rgba(0,0,0,.1); --ring:#6b7280;
  --accent1:#5b5bff; --accent2:#ff5fc7; --accent3:#10bce0; --accent4:#10d6a6; --accent5:#eab308; --accent6:#f59e0b;
    --shadow: 0 20px 50px rgba(0,0,0,.08);
  }
  @media (prefers-color-scheme: light) {
    :root{ --bg:#ffffff; --text:#0b0b10; --muted:#52525b; --card:rgba(0,0,0,.04); --border:rgba(0,0,0,.1); --shadow:0 20px 50px rgba(0,0,0,.08); }
  }

  html,body{height:100%}
  body{
    margin:0; background: var(--bg); color:var(--text);
    /* Futuristic body font */
    font-family: "Space Grotesk", ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
    -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;
    overflow: hidden; /* main scroller handles it */
  }

  /* Sticky Nav */
  .nav{position:sticky; top:0; z-index:1000;
    backdrop-filter: blur(10px);
    background: color-mix(in oklab, var(--bg) 78%, transparent);
    border-bottom:1px solid var(--border);
  }
  .nav-inner{max-width:1160px;margin:0 auto;padding:0 16px;
    display:flex;align-items:center;justify-content:space-between;height:var(--nav-h)}
  .brand{font-weight:800;letter-spacing:.6px;text-decoration:none;color:var(--text);font-size:clamp(16px,2.4vw,18px);font-family:"Orbitron","Space Grotesk",ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
  .nav a.item{padding:8px 10px;border-radius:999px;text-decoration:none;color:var(--text);opacity:.8; transition:opacity .2s var(--ease), transform .2s var(--ease); font-size:14px}
  .nav a.item:hover{opacity:1; transform: translateY(-1px)}
  .nav a.item.active{opacity:1; background:rgba(255,255,255,.06); box-shadow: inset 0 0 0 1px var(--border)}
  /* Plain text link variant (no pill/circle) */
  .nav a.item.link-plain{ border-radius:0; background:transparent; box-shadow:none; }
  .nav a.item.link-plain.active{ background:transparent; box-shadow:none; }
  .btn.link-plain{ background:transparent; border:none; box-shadow:none; border-radius:0; padding:0; }
  .btn.link-plain:active{ transform:none; }
  /* Theme toggle button */
  .theme-toggle{ width:36px; height:36px; padding:0; border-radius:999px; position:relative; display:grid; place-items:center;
    border:1px solid var(--border); background: color-mix(in oklab, var(--bg) 70%, transparent); overflow:hidden; isolation:isolate; box-sizing:border-box; line-height:0; vertical-align:middle }
  .theme-toggle::before{ content:""; position:absolute; inset:-2px; border-radius:inherit; pointer-events:none;
    background: conic-gradient(from 0deg, var(--accent1), var(--accent2), var(--accent3), var(--accent4), var(--accent1));
    opacity:.35; filter: blur(8px); transform: scale(1.1); transition: opacity .25s var(--ease); z-index:0 }
  .theme-toggle:hover::before{ opacity:.6 }
  /* Ensure icons sit above glow and use currentColor for strokes */
  .theme-icon{ width:18px; height:18px; color: var(--text); position:absolute; top:50%; left:50%; transform: translate(-50%,-50%);
    transform-origin: 50% 50%; z-index:1; display:block; margin:0; pointer-events:none }
  /* Optical centering for the crescent so it appears centered */
  .theme-icon.moon{ transform: translate(calc(-50% + 0.5px), -50%) }
  .theme-icon *, .theme-icon{ stroke: currentColor; fill: none }
  .theme-icon.moon{ display:none }
  html[data-theme="light"] .theme-icon.sun{ display:none }
  html[data-theme="light"] .theme-icon.moon{ display:block }
  html[data-theme="dark"] .theme-icon.sun{ display:block }
  html[data-theme="dark"] .theme-icon.moon{ display:none }
  /* Make sure the toggle keeps grid-centering even with .btn base styles */
  .btn.theme-toggle{ display:grid; place-items:center }
  .progress{height:2px; width:100%; background: linear-gradient(90deg,var(--accent1),var(--accent2),var(--accent3),var(--accent4));
    transform-origin:left; transform: scaleX(0); transition: transform .25s var(--ease)}

  /* Fullpage snap container */
  .snapper{
    height:calc(100dvh - var(--nav-h));
    overflow-y:auto; overflow-x:hidden;
    scroll-snap-type: y proximity; /* relax snap to allow manual scrolling */
    scroll-behavior: smooth;
    perspective: 1000px;
  }
  /* Allow extra tail space so the last panel can fully scroll into view */
  .snapper::after{ content:""; display:block; height: 1px }
  section.panel{
    position: relative;
    min-height: calc(100dvh - var(--nav-h));
    scroll-snap-align: start;
    display:grid;
    place-items:center;
    padding: clamp(12px, 3vw, 32px);
    isolation: isolate;
  }
  /* Keep last panel as a snap target to allow navigation via menu/dots */
  .container{max-width:1160px;width:100%;margin:0 auto;position:relative;z-index:2}

  /* Shared UI */
  .badge{display:inline-flex;align-items:center;gap:6px;font-size:12px;padding:6px 12px;border-radius:999px;border:1px solid var(--border);background:rgba(255,255,255,.05)}
  .btn{display:inline-flex;align-items:center;gap:8px; padding:10px 16px; border-radius:999px;
       border:1px solid var(--border); background:linear-gradient( to bottom right, rgba(255,255,255,.08), rgba(255,255,255,.02));
       color:var(--text); text-decoration:none; position:relative; overflow:hidden; transition: transform .2s var(--ease), box-shadow .2s var(--ease) }
  /* Primary buttons: neutral base, vibrant on hover */
  .btn.primary{ border-color: var(--border); color: var(--text); background: linear-gradient( to bottom right, rgba(255,255,255,.08), rgba(255,255,255,.02)); }
  .btn.primary:hover, .btn.primary:focus-visible{ border-color: transparent; color:#0b0b10; background: linear-gradient(90deg,var(--accent1),var(--accent2),var(--accent3)); }
  /* All standard buttons get the same vibrant hover (exclude plain links) */
  .btn:not(.link-plain):not(.theme-toggle):hover,
  .btn:not(.link-plain):not(.theme-toggle):focus-visible{ border-color: transparent; color:#0b0b10; background: linear-gradient(90deg,var(--accent1),var(--accent2),var(--accent3)); }
  /* Keep theme toggle legible on hover/focus */
  .btn.theme-toggle:hover,
  .btn.theme-toggle:focus-visible{ color: var(--text) }
  .btn:active{transform: translateY(1px) scale(.99)}
  .btn.magnetic{will-change: transform;}
  .btn .ripple{ position:absolute; width:12px; height:12px; border-radius:50%; background:rgba(255,255,255,.4); transform: translate(-50%,-50%) scale(0); opacity:.0; }
  .btn:hover .ripple{ animation: ripple 900ms var(--ease) forwards }
  @keyframes ripple{ to { transform: translate(var(--rx), var(--ry)) scale(18); opacity: 0; } }
  .card{border:1px solid var(--border);background:var(--card);border-radius:var(--radius);box-shadow: var(--shadow);overflow:hidden; position:relative}
  .card.pad{padding:22px}
  .card.sheen::after{
    content:""; position:absolute; inset:0; pointer-events:none;
    background: linear-gradient(120deg, transparent 30%, rgba(255,255,255,.12) 50%, transparent 70%);
    transform: translateX(-120%);
    transition: transform .6s var(--ease);
    mix-blend-mode: screen;
  }
  .card.sheen:hover::after{ transform: translateX(120%); }

  /* Headings: futuristic, larger, lighter weight */
  h1,h2,h3{font-family:"Orbitron","Space Grotesk",ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;letter-spacing:.4px; font-weight:400}
  h1{font-size:clamp(40px,6vw,72px);line-height:1.04;margin:0 0 10px}
  h2{font-size:clamp(26px,4.2vw,40px);line-height:1.08;margin:0 0 10px}
  h3{font-size:clamp(20px,3vw,24px);line-height:1.12;margin:0 0 8px}
  p.muted{color:var(--muted);font-size:clamp(14px,2.4vw,16px)}

  /* Background layers per panel */
  .bg-layer{position:absolute;inset:0;z-index:0;pointer-events:none;overflow:hidden}
  .stars, .dust{
    position:absolute; inset:-20vh -20vw; opacity:.25; will-change: transform, opacity;
    background-repeat: repeat;
    mix-blend-mode: screen;
  }
  .stars{background-image: radial-gradient(1px 1px at 20% 30%, rgba(255,255,255,.9), transparent),
                         radial-gradient(1px 1px at 60% 70%, rgba(255,255,255,.8), transparent),
                         radial-gradient(1px 1px at 80% 10%, rgba(255,255,255,.7), transparent); background-size: 600px 600px, 800px 800px, 1000px 1000px;}
  .dust{background-image: radial-gradient(1200px 800px at 10% 30%, rgba(124,124,255,.08), transparent 60%),
                         radial-gradient(1000px 1000px at 120% 20%, rgba(71,231,255,.06), transparent 60%),
                         radial-gradient(800px 800px at 40% 120%, rgba(255,106,213,.07), transparent 60%);}

  /* Hero */
  .hero-grid{display:grid;gap:24px;align-items:center}
  @media(min-width:900px){.hero-grid{grid-template-columns:1.2fr .8fr}}
  .hero-viz{height:min(60vw,480px);border-radius:28px;border:1px solid var(--border);position:relative;overflow:hidden; backdrop-filter: blur(1px);}
  /* Hide previous blob visuals when globe is present */
  .hero-viz .blob{display:none}
  /* Globe canvas fills hero viz */
  #globe{position:absolute; inset:0; width:100%; height:100%; display:block; pointer-events:none; z-index:1}
  /* No backdrop vignette; we enhance visibility via theme-aware particles/wireframe */
  /* Stage label centered over hero */
  .stage-label{ position:absolute; inset:0; display:grid; place-items:center; pointer-events:none; z-index:2 }
  .stage-label span{ background: color-mix(in oklab, var(--bg) 40%, transparent); backdrop-filter: blur(4px);
    padding: 6px 10px; border-radius: 10px; border:1px solid var(--border);
    font-family: "Orbitron","Space Grotesk",ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
    font-size: clamp(14px, 2.4vw, 20px); letter-spacing:.4px; color: var(--text);
    opacity:0; transform: translateY(6px); transition: opacity .4s var(--ease), transform .4s var(--ease);
  }
  .stage-label span.show{ opacity:1; transform:none }
  .blob{position:absolute; border-radius:50%; filter: blur(28px); mix-blend-mode:screen; will-change: transform}
  .b1{ width:420px;height:420px; left:-40px; top:-60px; background: radial-gradient(circle, rgba(124,124,255,.45), transparent 60%) }
  .b2{ width:380px;height:380px; right:-60px; bottom:-60px; background: radial-gradient(circle, rgba(255,106,213,.4), transparent 60%) }
  .b3{ width:260px;height:260px; left:40%; top:40%; background: radial-gradient(circle, rgba(71,231,255,.35), transparent 60%) }

  /* Reveal */
  .reveal{opacity:0; transform: translateY(12px) scale(.98); transition: opacity .42s var(--ease), transform .42s var(--ease)}
  .reveal.show{opacity:1; transform: none}

  /* Grids: responsive safe */
  .grid{display:grid;gap:20px}
  .grid-3{grid-template-columns:repeat(auto-fit,minmax(240px,1fr))}
  .grid-4{grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}
  .grid-2{grid-template-columns:repeat(auto-fit,minmax(260px,1fr))}
  /* Explicit 6-column grid for Toolkits; responsive fallbacks */
  .grid-6{grid-template-columns:repeat(6,minmax(0,1fr))}
  @media (max-width: 1200px){ .grid-6{ grid-template-columns: repeat(3, minmax(0,1fr)) } }
  @media (max-width: 720px){ .grid-6{ grid-template-columns: repeat(2, minmax(0,1fr)) } }
  @media (max-width: 480px){ .grid-6{ grid-template-columns: 1fr } }

  /* Toolkits (Skills) — spacing and color-coded badges per category */
  #skills .card h3{ margin-bottom: 8px }
  #skills .card h3::before{
    content:"";
    display:inline-block;
    width:10px; height:10px; border-radius:50%;
    background: var(--cat, var(--accent3));
    box-shadow: 0 0 10px color-mix(in oklab, var(--cat, var(--accent3)) 55%, transparent);
    margin-right:8px; vertical-align: middle; opacity:.95;
  }
  #skills .toolkit-badges{ display:flex; gap:6px; flex-wrap:wrap; margin-top:18px }
  /* Smaller pill size in Toolkits so more fit per row */
  #skills .badge{ font-size:11px; padding:4px 10px; line-height:1 }
  /* Assign a category color per card using --cat; reuse accents intentionally */
  #skills .grid-6 > .card:nth-child(1){ --cat: var(--accent2) } /* pink */
  #skills .grid-6 > .card:nth-child(2){ --cat: var(--accent3) } /* blue */
  #skills .grid-6 > .card:nth-child(3){ --cat: var(--accent4) } /* green */
  #skills .grid-6 > .card:nth-child(4){ --cat: var(--accent1) } /* purple */
  #skills .grid-6 > .card:nth-child(5){ --cat: var(--accent5) } /* yellow */
  #skills .grid-6 > .card:nth-child(6){ --cat: var(--accent6) } /* orange */
  #skills .card .badge{
    background: color-mix(in oklab, var(--cat, var(--accent3)) 16%, transparent);
    border-color: color-mix(in oklab, var(--cat, var(--accent3)) 46%, var(--border));
  }
  #skills .card .badge:hover{
    background: color-mix(in oklab, var(--cat, var(--accent3)) 26%, transparent);
  }

  /* Flashier, interactive Toolkit cards */
  #skills .toolkit-card{ position:relative; overflow:hidden; isolation:isolate }
  #skills .toolkit-card::before{
    content:""; position:absolute; inset:-1px; padding:1px; border-radius:inherit; pointer-events:none; z-index:0;
    background: conic-gradient(from var(--ringOffset, 0deg), color-mix(in oklab, var(--cat, var(--accent3)) 55%, transparent), transparent 30%, color-mix(in oklab, var(--cat, var(--accent3)) 35%, transparent), transparent 70%);
    -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
    mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
    -webkit-mask-composite: xor; mask-composite: exclude;
  opacity: var(--ringOpacity, .25); transform: rotate(0deg) scale(var(--ringScale, 1)); animation: tk-ring-spin var(--spinDur, 8s) linear infinite; animation-direction: var(--spinDir, normal); animation-delay: var(--spinDelay, 0s);
  }
  #skills .toolkit-card::after{
    /* subtle inner glow */
    content:""; position:absolute; inset:2px; border-radius:inherit; pointer-events:none; z-index:0;
    background:
      radial-gradient(120% 80% at 50% 0%, color-mix(in oklab, var(--cat, var(--accent3)) 10%, transparent), transparent 60%),
      radial-gradient(120% 80% at 50% 100%, color-mix(in oklab, var(--cat, var(--accent3)) 8%, transparent), transparent 60%);
  filter: blur(10px); opacity: var(--glowOpacity, .18); transition: opacity .3s var(--ease); transform: scale(var(--glowScale, 1));
  }
  #skills .toolkit-card:hover::before,
  #skills .toolkit-card:focus-visible::before,
  #skills .toolkit-card.active::before{ opacity: var(--ringOpacityHover, .5) }
  #skills .toolkit-card:hover::after,
  #skills .toolkit-card:focus-visible::after,
  #skills .toolkit-card.active::after{ opacity: var(--glowOpacityHover, .32) }
  #skills .toolkit-card:hover,
  #skills .toolkit-card:focus-visible,
  #skills .toolkit-card.active{ box-shadow: 0 18px 50px color-mix(in oklab, var(--cat, var(--accent3)) 20%, transparent) }
  #skills .toolkit-card .toolkit-badges .badge{ transition: transform .2s var(--ease), background .2s var(--ease) }
  #skills .toolkit-card:hover .toolkit-badges .badge{ transform: translateY(calc(-1 * var(--lift, 1px))); background: color-mix(in oklab, var(--cat, var(--accent3)) 32%, transparent) }

  @keyframes tk-ring-spin{ to{ transform: rotate(360deg) } }
  @media (prefers-reduced-motion: reduce){
  #skills .toolkit-card::before{ animation: none }
    #skills .toolkit-card .toolkit-badges .badge{ transition: none }
  }

  /* Filter pills & projects */
  .pills{display:flex;gap:8px;flex-wrap:wrap;margin:10px 0 16px}
  .pill{display:inline-flex;align-items:center;gap:8px;border-radius:18px;padding:6px 12px;background:rgba(255,255,255,.06);border:1px solid var(--border);cursor:pointer;user-select:none}
  .pill.active{background:linear-gradient(90deg,var(--accent3),var(--accent4)); color:#0b0b10; border-color:transparent}
  .project-thumb{aspect-ratio:16/9;border-radius:16px; position:relative; overflow:hidden; background:
    conic-gradient(from 90deg at 50% 50%, rgba(124,124,255,.3), rgba(71,231,255,.25), rgba(22,242,179,.25), rgba(255,106,213,.3), rgba(124,124,255,.3));
    background-size: cover; background-position:center;}
  .project-thumb::after{ content:""; position:absolute; inset:0; pointer-events:none; background: linear-gradient(180deg, transparent 60%, rgba(0,0,0,.22)); opacity:.55 }
  .project{transition: transform .2s var(--ease), box-shadow .2s var(--ease), opacity .2s var(--ease), scale .2s var(--ease)}
  .project.hide{opacity:.0; scale: .96; pointer-events:none}

  /* Modal */
  .modal{position:fixed; inset:0; display:none; place-items:center; background:rgba(0,0,0,.5); z-index:2000}
  .modal.show{display:grid}
  .modal-card{max-width:960px; width:92%; border-radius:18px; background:var(--bg); border:1px solid var(--border); box-shadow: var(--shadow); overflow:hidden}
  /* Case-themed modal accents */
  .modal-card.case-radius{ --case: var(--accent6); background: linear-gradient(180deg, color-mix(in oklab, var(--bg) 93%, var(--case)), color-mix(in oklab, var(--bg) 98%, var(--case))); border-color: color-mix(in oklab, var(--case) 38%, var(--border)) }
  .modal-card.case-abloom{ --case: var(--accent2); background: linear-gradient(180deg, color-mix(in oklab, var(--bg) 93%, var(--case)), color-mix(in oklab, var(--bg) 98%, var(--case))); border-color: color-mix(in oklab, var(--case) 38%, var(--border)) }
  .modal-head{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border-bottom:1px solid var(--border); position:relative; overflow:hidden}
  /* Allow a subtle background cover for specific cases */
  .modal-head.radius-cover::before{ content:""; position:absolute; inset:0; background: url('Assets/scenes/radius.jpg') right top/cover no-repeat; opacity:.14; filter: saturate(.9) contrast(.95) brightness(1.05); pointer-events:none }
  .modal-head.abloom-cover::before{ content:""; position:absolute; inset:0; background: url('Assets/scenes/abloom.jpg') right top/cover no-repeat; opacity:.14; filter: saturate(.9) contrast(.95) brightness(1.05); pointer-events:none }
  .modal-head.radius-cover{ border-bottom-color: color-mix(in oklab, var(--accent6) 45%, var(--border)) }
  .modal-head.abloom-cover{ border-bottom-color: color-mix(in oklab, var(--accent2) 45%, var(--border)) }
  .modal-head.radius-cover::after{ content:""; position:absolute; inset:0; background: linear-gradient(90deg, rgba(0,0,0,.12), rgba(0,0,0,0) 60%); pointer-events:none }
  .modal-head.abloom-cover::after{ content:""; position:absolute; inset:0; background: linear-gradient(90deg, rgba(0,0,0,.12), rgba(0,0,0,0) 60%); pointer-events:none }
  .modal-head > *{ position:relative; z-index:1 }
  .modal-body{padding:20px; max-height: min(72vh, 680px); overflow-y:auto}
  /* Modal content readability */
  .modal-body .story-block{ max-width: 820px; margin: 0 auto; }
  .modal-body .story-block p{ margin:0; font-size: clamp(14px, 1.7vw, 16.8px); line-height:1.75; letter-spacing: 0.01em }
  .modal-body .story-block p + p{ margin-top:12px }
  .modal-body .trackable{ transition: letter-spacing .2s var(--ease), background-color .2s var(--ease) }
  .modal-body .trackable:hover{ letter-spacing: 0.03em; background: color-mix(in oklab, var(--bg) 88%, transparent) }
  .modal-body .section-title{ font-weight:700; letter-spacing:.2px; color: var(--muted); text-transform:none; margin-top:14px; margin-bottom:8px }
  /* Case-tinted subheadings inside modals */
  .modal-card.case-radius .modal-body .section-title,
  .modal-card.case-abloom .modal-body .section-title{ color: var(--case) }
  /* Neon underline effect for case-tinted subheadings */
  .modal-card.case-radius .modal-body .section-title,
  .modal-card.case-abloom .modal-body .section-title{ position:relative; display:inline-block; padding-bottom:6px }
  .modal-card.case-radius .modal-body .section-title::after,
  .modal-card.case-abloom .modal-body .section-title::after{ content:""; position:absolute; left:0; right:0; bottom:0; height:1px; border-radius:1px;
    background: var(--case);
    box-shadow: 0 0 4px color-mix(in oklab, var(--case) 28%, transparent);
  }
  .modal-card.case-radius .modal-body .section-title::before,
  .modal-card.case-abloom .modal-body .section-title::before{ content:""; position:absolute; left:0; right:0; bottom:0; height:4px; border-radius:4px;
    background: var(--case); opacity:.1; filter: blur(4px); pointer-events:none;
  }
  .modal-body .story-list{ margin:0 0 8px 0; padding-left:18px }
  .modal-body .story-list li{ margin: 0 0 8px 0; line-height: 1.65 }
  .modal-body .team-badges{ display:flex; gap:8px; flex-wrap:wrap; margin-bottom:8px }
  /* Ensure spacing after a section title when the next sibling is a flex badge row */
  .modal-body .section-title + div{ margin-top:6px; margin-bottom:10px }
  /* Staggered content reveal */
  .modal-body .story-block p{ opacity: 1; transform: none }
  .modal-body .p-reveal{ opacity:0; transform: translateY(6px) }
  @keyframes modal-fade-up{ to{ opacity:1; transform: none } }
  .modal-body .p-reveal.start{ animation: modal-fade-up 420ms var(--ease) forwards }
  /* Increase specificity for paragraphs so reveal state wins over the generic p rule above */
  .modal-body .story-block p.p-reveal{ opacity:0; transform: translateY(6px) }
  .modal-body .story-block p.p-reveal.start{ animation: modal-fade-up 420ms var(--ease) forwards }
  /* Disable hover tracking while animating intro */
  .modal-body.animating .trackable{ pointer-events: none }
  @media (prefers-reduced-motion: reduce){
    .modal-body .p-reveal, .modal-body .p-reveal.start{ animation: none; opacity:1; transform:none }
  }
  @media (prefers-reduced-motion: reduce){ .modal-body .trackable{ transition:none } }
  .close{cursor:pointer;opacity:.7}
  .close:hover{opacity:1}

  /* Impact KPI blocks */
  #highlights .impact-grid{ display:grid; gap:20px; grid-template-columns:repeat(2, minmax(0,1fr)); margin-top:18px }
  @media (max-width: 720px){
    #highlights .impact-grid{ grid-template-columns: 1fr }
  }
  .kpi-card{ position:relative; border:1px solid var(--border); background: linear-gradient(180deg, color-mix(in oklab, var(--bg) 90%, transparent), color-mix(in oklab, var(--bg) 70%, transparent)); border-radius:18px; padding:22px; overflow:hidden; box-shadow: var(--shadow); transition: transform .25s var(--ease), box-shadow .25s var(--ease), border-color .25s var(--ease) }
  .kpi-card::before{ content:""; position:absolute; inset:-1px; border-radius:inherit; padding:1px; background: conic-gradient(from 0deg, color-mix(in oklab, var(--kpi, var(--accent3)) 60%, transparent), transparent 40%, color-mix(in oklab, var(--kpi, var(--accent3)) 40%, transparent)); -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0); mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0); -webkit-mask-composite: xor; mask-composite: exclude; opacity:.25; pointer-events:none }
  .kpi-card:hover{ transform: translateY(-2px); box-shadow: 0 18px 50px color-mix(in oklab, var(--kpi, var(--accent3)) 22%, transparent); border-color: color-mix(in oklab, var(--kpi, var(--accent3)) 40%, var(--border)); }
  .kpi-metric{ display:flex; align-items:baseline; gap:8px; font-family:"Orbitron","Space Grotesk",ui-sans-serif; margin-bottom:6px }
  .kpi-prefix{ color: var(--kpi, var(--accent3)); font-weight:800 }
  .kpi-number{ font-size: clamp(26px,5vw,42px); font-weight:800; letter-spacing:.5px; background: linear-gradient(90deg, var(--kpi, var(--accent3)), color-mix(in oklab, var(--kpi, var(--accent3)) 80%, var(--text))); -webkit-background-clip:text; background-clip:text; color:transparent }
  .kpi-suffix{ font-size: clamp(16px,3vw,22px); font-weight:700; color: var(--kpi, var(--accent3)) }
  .kpi-plus{ font-size: 2em; font-weight:800; color: var(--kpi, var(--accent3)); line-height: .8; margin-left: 2px }
  .kpi-title{ margin-top:8px; font-weight:700 }
    .kpi-title{ margin-top:12px; font-weight:400; font-size: clamp(18px, 3vw, 24px); line-height:1; letter-spacing:-0.2px }
  .kpi-title .kpi-meta{ color: color-mix(in oklab, var(--text) 60%, var(--bg)); font-size: calc(1em - 8px); font-weight: 400; display:block; margin-top:2px }
  .kpi-desc{ margin-top:8px; line-height:1.5 }
  /* New combined heading style (metric + text on front) */
  .kpi-heading{ display:flex; align-items:baseline; gap:8px; flex-wrap:wrap; font-size: clamp(18px, 3vw, 22px); line-height:1.25; font-weight:500 }
  .kpi-heading .kpi-text{ letter-spacing:-0.2px }
  .kpi-heading .kpi-meta{ color: color-mix(in oklab, var(--text) 60%, var(--bg)); font-size: calc(1em - 8px); font-weight: 400; display:block; margin-top:2px }
  /* Utility */
  .nowrap{ white-space: nowrap }
  /* Front face slightly smaller to avoid corner clipping */
  #highlights .kpi-card .flip-face.front .kpi-heading{ font-size: clamp(16px, 2.6vw, 20px) }
  #highlights .kpi-card .flip-face.front .kpi-number{ font-size: clamp(22px, 4.6vw, 38px) }
  #highlights .kpi-card .flip-face.front .kpi-suffix{ font-size: clamp(14px, 2.6vw, 20px) }
  #highlights .kpi-card .flip-face.front .kpi-plus{ font-size: 1.8em }
  /* Variants */
  .kpi-pink{ --kpi: var(--accent2) }
  .kpi-green{ --kpi: var(--accent4) }
  .kpi-blue{ --kpi: var(--accent3) }
  .kpi-purple{ --kpi: var(--accent1) }
  /* Flip styles for highlights KPI cards */
  #highlights .kpi-card{ perspective: 1000px; }
  #highlights .kpi-card .flip-inner{ position:relative; border-radius:18px; transform-style: preserve-3d; transition: transform .7s var(--ease);
    /* Prevent collapse: absolute faces don't contribute to height */
    min-height: clamp(160px, 24vh, 260px);
  }
  #highlights .kpi-card .flip-face{ position:absolute; inset:0; border-radius:18px; backface-visibility:hidden; overflow:hidden }
  #highlights .kpi-card .flip-face.front{ display:flex; flex-direction:column; justify-content:center; gap:10px; padding:22px }
  #highlights .kpi-card .flip-face.back{ transform: rotateY(180deg); display:flex; flex-direction:column; justify-content:center; gap:10px; padding:22px; background: linear-gradient(180deg, color-mix(in oklab, var(--bg) 84%, transparent), color-mix(in oklab, var(--bg) 70%, transparent)); border:1px solid var(--border) }
  /* Backlights: only show when card is locked in flipped state (clicked) */
  #highlights .kpi-card .flip-face.back::before{
    content:""; position:absolute; inset:-10%; pointer-events:none; border-radius:22px;
    background:
      radial-gradient(120% 80% at 50% 0%, color-mix(in oklab, var(--kpi, var(--accent3)) 22%, transparent), transparent 60%),
      radial-gradient(120% 80% at 50% 100%, color-mix(in oklab, var(--kpi, var(--accent3)) 18%, transparent), transparent 60%),
      radial-gradient(140% 120% at -10% 50%, color-mix(in oklab, var(--kpi, var(--accent3)) 12%, transparent), transparent 60%),
      radial-gradient(140% 120% at 110% 50%, color-mix(in oklab, var(--kpi, var(--accent3)) 12%, transparent), transparent 60%);
    filter: blur(18px);
    opacity: 0; transition: opacity .35s var(--ease);
  }
  #highlights .kpi-card.flipped .flip-face.back::before{ opacity: .7 }
  /* Enhance border glow and shadow when flipped (locked) */
  #highlights .kpi-card.flipped{ box-shadow: 0 22px 70px color-mix(in oklab, var(--kpi, var(--accent3)) 26%, transparent); border-color: color-mix(in oklab, var(--kpi, var(--accent3)) 50%, var(--border)) }
  #highlights .kpi-card.flipped::before{ opacity: .45 }
  #highlights .kpi-card:hover .flip-inner, #highlights .kpi-card.flipped .flip-inner{ transform: rotateY(180deg) }
  #highlights .kpi-card .back-title{ font-weight:600; font-size: clamp(16px, 2.6vw, 18px) }
  #highlights .kpi-card .back-note{ color: var(--muted); font-size: clamp(12px, 2.2vw, 14px); line-height:1.5 }

  /* Scene/script style cards (My scenes) */
  #capabilities .scene-card{ position:relative; overflow:hidden; transition: background .25s var(--ease), border-color .25s var(--ease), box-shadow .25s var(--ease), transform .25s var(--ease) }
  #capabilities .scene-card:hover{ transform: translateY(-2px) }
  /* Per-card hover tints */
  #capabilities .scene-card:nth-child(1):hover{ 
    background: linear-gradient(180deg, color-mix(in oklab, var(--accent2) 16%, transparent), color-mix(in oklab, var(--bg) 84%, transparent));
    border-color: color-mix(in oklab, var(--accent2) 40%, var(--border));
    box-shadow: 0 14px 40px color-mix(in oklab, var(--accent2) 22%, transparent);
  }
  #capabilities .scene-card:nth-child(2):hover{ 
    background: linear-gradient(180deg, color-mix(in oklab, var(--accent4) 16%, transparent), color-mix(in oklab, var(--bg) 84%, transparent));
    border-color: color-mix(in oklab, var(--accent4) 40%, var(--border));
    box-shadow: 0 14px 40px color-mix(in oklab, var(--accent4) 22%, transparent);
  }
  #capabilities .scene-card:nth-child(3):hover{ 
    background: linear-gradient(180deg, color-mix(in oklab, var(--accent3) 16%, transparent), color-mix(in oklab, var(--bg) 84%, transparent));
    border-color: color-mix(in oklab, var(--accent3) 40%, var(--border));
    box-shadow: 0 14px 40px color-mix(in oklab, var(--accent3) 22%, transparent);
  }
  #capabilities .scene-card:nth-child(4):hover{ 
    background: linear-gradient(180deg, color-mix(in oklab, var(--accent1) 16%, transparent), color-mix(in oklab, var(--bg) 84%, transparent));
    border-color: color-mix(in oklab, var(--accent1) 40%, var(--border));
    box-shadow: 0 14px 40px color-mix(in oklab, var(--accent1) 22%, transparent);
  }
  #capabilities .scene-card .cap{
    display:flex; align-items:center; justify-content:space-between;
    padding:8px 12px; margin:-22px -22px 12px; /* negate .card.pad */
    background: linear-gradient(90deg, color-mix(in oklab, var(--bg) 86%, transparent), color-mix(in oklab, var(--bg) 70%, transparent));
    border-bottom:1px solid var(--border);
    font-family:"Orbitron","Space Grotesk",ui-sans-serif; letter-spacing:.3px; font-size:12px; color:var(--muted)
  }
  #capabilities .scene-card .cap .scene{ display:inline-flex; gap:8px; align-items:center }
  #capabilities .scene-card .cap .scene::before{
    content:"●"; color: var(--accent2); opacity:.9; font-size:12px;
  }
  /* Per-scene dot colors: 1=Pink, 2=Green, 3=Blue, 4=Purple */
  #capabilities .scene-card:nth-child(1) .cap .scene::before{ color: var(--accent2) }
  #capabilities .scene-card:nth-child(2) .cap .scene::before{ color: var(--accent4) }
  #capabilities .scene-card:nth-child(3) .cap .scene::before{ color: var(--accent3) }
  #capabilities .scene-card:nth-child(4) .cap .scene::before{ color: var(--accent1) }
  #capabilities .scene-card .cap .tc{ font-variant-numeric: tabular-nums; opacity:.9 }
  #capabilities .scene-card .frame{
    position:relative; aspect-ratio:16 / 9; border-radius:12px; overflow:hidden;
    border:1px solid var(--border); background:
      radial-gradient(120% 90% at 10% 10%, color-mix(in oklab, var(--accent1) 26%, transparent), transparent 60%),
      radial-gradient(120% 90% at 90% 20%, color-mix(in oklab, var(--accent3) 26%, transparent), transparent 60%),
      radial-gradient(120% 90% at 50% 110%, color-mix(in oklab, var(--accent2) 26%, transparent), transparent 60%),
      linear-gradient(160deg, color-mix(in oklab, var(--bg) 86%, transparent), color-mix(in oklab, var(--bg) 70%, transparent));
  }
  /* No custom grid override; use global .grid-4 sizing */
  #capabilities .scene-card .frame::after{
    content:""; position:absolute; inset:0; pointer-events:none;
    background: linear-gradient(120deg, rgba(255,255,255,.08), transparent 40%, rgba(255,255,255,.06) 60%, transparent 75%);
    mix-blend-mode: screen; opacity:.6; transform: translateX(-30%);
    transition: transform .6s var(--ease), opacity .3s var(--ease);
  }
  #capabilities .scene-card:hover .frame::after{ transform: translateX(30%); opacity:.9 }
  #capabilities .scene-card .play{
    position:absolute; inset:0; margin:auto; width:52px; height:52px; display:block; z-index:1;
    filter: drop-shadow(0 4px 10px rgba(0,0,0,.25)); opacity:.9;
  }
  #capabilities .scene-card h3{ margin-top:14px; margin-bottom:2px }
  #capabilities .scene-card p.muted{ margin-top:8px; line-height:1.5 }

  /* Animated gradient effects per scene (disabled when using images) */
  @property --a { syntax: '<angle>'; inherits: false; initial-value: 0deg; }
  #capabilities .scene-card .frame{ background-size: 200% 200%; animation: none !important; background-position: center; }
  /* Scene 1: diagonal aurora sweep */
  #capabilities .scene-card:nth-child(1) .frame{
    background:
      linear-gradient(120deg,
        color-mix(in oklab, var(--accent1) 40%, transparent) 0%,
        color-mix(in oklab, var(--accent3) 40%, transparent) 35%,
        color-mix(in oklab, var(--accent2) 40%, transparent) 70%,
        color-mix(in oklab, var(--accent4) 40%, transparent) 100%),
      linear-gradient(160deg, color-mix(in oklab, var(--bg) 88%, transparent), color-mix(in oklab, var(--bg) 70%, transparent));
  /* animation disabled via base rule when images are applied */
  }
  @keyframes slideGrad1{ 0%{ background-position: 0% 50%, center } 100%{ background-position: 100% 50%, center } }
  /* Scene 2: conic spin */
  #capabilities .scene-card:nth-child(2) .frame{ --a: 0deg;
    background:
      conic-gradient(from var(--a) at 50% 50%,
        color-mix(in oklab, var(--accent3) 40%, transparent),
        color-mix(in oklab, var(--accent4) 40%, transparent),
        color-mix(in oklab, var(--accent1) 40%, transparent),
        color-mix(in oklab, var(--accent2) 40%, transparent),
        color-mix(in oklab, var(--accent3) 40%, transparent)),
      linear-gradient(160deg, color-mix(in oklab, var(--bg) 88%, transparent), color-mix(in oklab, var(--bg) 70%, transparent));
  /* animation disabled via base rule when images are applied */
  }
  @keyframes spinGrad{ to{ --a: 360deg } }
  /* Scene 3: drifting radials */
  #capabilities .scene-card:nth-child(3) .frame{
    background:
      radial-gradient(closest-side at 20% 30%, color-mix(in oklab, var(--accent2) 42%, transparent), transparent 60%),
      radial-gradient(farthest-corner at 80% 70%, color-mix(in oklab, var(--accent1) 34%, transparent), transparent 60%),
      radial-gradient(closest-side at 60% 10%, color-mix(in oklab, var(--accent3) 32%, transparent), transparent 60%),
      linear-gradient(160deg, color-mix(in oklab, var(--bg) 88%, transparent), color-mix(in oklab, var(--bg) 70%, transparent));
    background-size: 140% 140%, 130% 130%, 120% 120%, auto;
  /* animation disabled via base rule when images are applied */
  }
  @keyframes drift3{
    0%{ background-position: 0% 0%, 100% 100%, 40% 10%, center }
    100%{ background-position: 60% 40%, 20% 60%, 70% 30%, center }
  }
  /* Scene 4: repeating conic waves */
  #capabilities .scene-card:nth-child(4) .frame{ --a: 0deg;
    background:
      radial-gradient(120% 90% at 50% 110%, color-mix(in oklab, var(--accent4) 24%, transparent), transparent 60%),
      repeating-conic-gradient(from var(--a) at 50% 50%,
        color-mix(in oklab, var(--accent3) 22%, transparent) 0 14deg,
        transparent 14deg 28deg),
      linear-gradient(160deg, color-mix(in oklab, var(--bg) 88%, transparent), color-mix(in oklab, var(--bg) 70%, transparent));
  /* animation disabled via base rule when images are applied */
    background-size: auto, 120% 120%, auto;
  }
  @keyframes float4{ 0%{ background-position: center, 50% 50%, center } 100%{ background-position: center, 60% 40%, center } }

  @media (prefers-reduced-motion: reduce){
  #capabilities .scene-card .frame{ animation: none !important }
  #capabilities .scene-card .frame::after{ transform: none }
  #highlights .kpi-card .flip-inner{ transition: opacity .2s var(--ease) }
  #highlights .kpi-card .flip-face.back{ transform: none; opacity:0 }
  #highlights .kpi-card:hover .flip-face.back, #highlights .kpi-card.flipped .flip-face.back{ opacity:1 }
  #highlights .kpi-card:hover .flip-face.front, #highlights .kpi-card.flipped .flip-face.front{ opacity:0 }
  }

  /* Pagination dots */
  .dots{position:fixed; right:14px; top:calc(var(--nav-h) + 50%); transform: translateY(-50%); display:flex; flex-direction:column; gap:10px; z-index:900;}
  .dot{width:8px;height:8px;border-radius:50%; background:#6b7280; opacity:.6; cursor:pointer; transition: transform .2s var(--ease), background .2s}
  .dot.active{transform: scale(1.4); background: linear-gradient(180deg,var(--accent3),var(--accent4)); opacity:1}

  /* Reviews slider */
  .reviews-wrap{ position:relative; overflow-x:hidden; overflow-y:visible; max-width: clamp(720px, 96vw, 1100px); margin-inline:auto; padding-bottom:16px; touch-action: pan-y }
  .reviews-track{ display:flex; gap:20px; will-change: transform; transition: transform .5s var(--ease); padding-right:20px; cursor: grab }
  .reviews-wrap.dragging{ user-select:none }
  .reviews-wrap.dragging .reviews-track{ cursor: grabbing }
  .review{ min-width: 100%; flex: 0 0 100% }
  .review .review-head{ display:flex; flex-direction:column; align-items:flex-start; justify-content:flex-start; gap:6px; margin-bottom:8px }
  .review .starbar{ display:flex; align-items:center; gap:8px; font-family:"Orbitron","Space Grotesk",ui-sans-serif }
  .review .starbar{ margin-left:0; margin-top:2px }
  .review .starbar span:first-child{ letter-spacing:2px; color: var(--accent3) }
  .review .starbar .rating{ font-weight:700; color: var(--text) }
  .review .who{ display:flex; flex-direction:column; align-items:flex-start; text-align:left }
  .review p{ overflow-wrap:anywhere }
  .reviews-dots{ display:flex; gap:8px; justify-content:center; margin-top:12px; position:relative; z-index:1 }
  .reviews-dots .r-dot{ width:8px; height:8px; border-radius:50%; background: #6b7280; opacity:.6; cursor:pointer; transition: transform .2s var(--ease), background .2s }
  .reviews-dots .r-dot.active{ transform: scale(1.4); background: linear-gradient(180deg,var(--accent3),var(--accent4)); opacity:1 }
  .reviews-dots .r-dot:focus-visible{ outline:2px solid var(--accent3); outline-offset:3px }

  /* Fun sparkles on review hover */
  #reviews .review.sparkle-host{ position: relative; overflow: hidden }
  #reviews .review.rm-glow{ box-shadow: 0 0 0 1px var(--accent3) inset, 0 0 16px var(--accent3) }
  #reviews .review .sparkle{
    position: absolute; left:0; top:0; width:8px; height:8px; border-radius:50%;
    background: radial-gradient(circle at 30% 30%, var(--accent3), var(--accent4));
    opacity: 0; pointer-events:none; mix-blend-mode: screen;
    transform: translate(-50%, -50%) scale(.5) rotate(0deg);
    filter: drop-shadow(0 0 6px var(--accent3));
    animation: sparkle-pop .9s ease-out forwards;
  }
  @keyframes sparkle-pop{
    0%{ opacity:0; transform: translate(-50%, -50%) scale(.5) rotate(0deg) }
    30%{ opacity:1 }
    100%{ opacity:0; transform: translate(-50%, -50%) scale(1.3) rotate(40deg) }
  }

  /* Custom cursor: mini gradient rounded-corner diamond */
  @media (hover:hover) and (pointer:fine){
    html, body { cursor: none }
    input, textarea, select, [contenteditable="true"]{ cursor: text }
    button, a, [role="button"], .btn{ cursor: none }
    #cursorDiamond{
      position: fixed; left: 0; top: 0; width: 14px; height: 14px;
      transform: translate(-50%, -50%) rotate(45deg);
      border-radius: 5px; pointer-events: none; z-index: 2147483647;
      background: conic-gradient(from 0deg, var(--accent2), var(--accent4), var(--accent3), var(--accent1), var(--accent2));
      box-shadow:
        0 0 10px color-mix(in hsl, var(--accent2) 35%, transparent),
        0 0 10px color-mix(in hsl, var(--accent4) 35%, transparent),
        0 0 10px color-mix(in hsl, var(--accent3) 35%, transparent),
        0 0 10px color-mix(in hsl, var(--accent1) 35%, transparent),
        0 0 2px color-mix(in hsl, var(--accent3) 60%, transparent) inset;
      mix-blend-mode: screen; opacity: .95;
      transition: transform .08s linear, opacity .15s ease;
    }
    /* Rotating gradient layer for extra color mixing */
    #cursorDiamond::before{
      content: ""; position:absolute; inset:0; border-radius:inherit;
      background: conic-gradient(from 0deg,
        color-mix(in oklab, var(--accent2) 90%, transparent),
        color-mix(in oklab, var(--accent4) 90%, transparent),
        color-mix(in oklab, var(--accent3) 90%, transparent),
        color-mix(in oklab, var(--accent1) 90%, transparent),
        color-mix(in oklab, var(--accent2) 90%, transparent)
      );
      animation: cursor-spin 6s linear infinite;
      opacity:.85;
    }
    /* Subtle facet glint */
    #cursorDiamond::after{
      content:""; position:absolute; inset:1px; border-radius:inherit;
      background: radial-gradient( circle at 65% 35%, rgba(255,255,255,.25), transparent 40%);
      opacity:.25; transition: opacity .2s ease;
    }
    body.cursor-intent #cursorDiamond::after{ opacity:.45 }
    @keyframes cursor-spin{ from{ transform: rotate(0deg) } to{ transform: rotate(360deg) } }
    @media (prefers-reduced-motion: reduce){ #cursorDiamond::before{ animation: none } }
    body.cursor-intent #cursorDiamond{ transform: translate(-50%, -50%) rotate(45deg) scale(1.2) }
    body.cursor-press #cursorDiamond{ transform: translate(-50%, -50%) rotate(45deg) scale(0.9) }
    body.cursor-drag #cursorDiamond{ opacity: .6 }
    /* Light theme: darken cursor for contrast and change blending */
    :root[data-theme="light"] #cursorDiamond{
      mix-blend-mode: normal;
      opacity: .95;
      border: 1px solid var(--accent1);
      box-shadow: none;
    }
    :root[data-theme="light"] #cursorDiamond::before{
      background: conic-gradient(
        from 0deg,
        color-mix(in oklab, var(--accent1) 78%, var(--text)),
        color-mix(in oklab, var(--accent2) 70%, var(--text)),
        color-mix(in oklab, var(--accent3) 70%, var(--text)),
        color-mix(in oklab, var(--accent4) 70%, var(--text)),
        color-mix(in oklab, var(--accent1) 78%, var(--text))
      );
      opacity:.9;
    }
    :root[data-theme="light"] #cursorDiamond::after{ opacity:.18 }
  }
  @media (max-width: 720px){ .review{ min-width:100%; flex-basis:100% } }

  /* Review card: transparent overlay, no frame */
  .review{ background: transparent !important; border: none !important; box-shadow: none !important; box-sizing: border-box }
  .review.sheen::after{ display:none !important }

  /* Case modal: image gallery */
  .case-gallery{ display:grid; gap:12px; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); margin-top:12px }
  .case-gallery a{ display:block }
  .case-gallery img{ width:100%; height:auto; display:block; border-radius:12px; border:1px solid var(--border) }
  .case-gallery img:hover{ transform: translateY(-1px); box-shadow: var(--shadow); transition: transform .2s var(--ease), box-shadow .2s var(--ease) }
  @media (prefers-reduced-motion: reduce){ .case-gallery img:hover{ transform:none } }

  /* Contact responsive buttons */
  .cta-row{display:flex;gap:10px;flex-wrap:wrap;justify-content:center}
  /* Contact: tech/shiny card enhancements */
  #contact .contact-card{ position:relative; overflow:hidden; isolation:isolate }
  /* Static subtle border glow (neutral) */
  #contact .contact-card::before{
    content:""; position:absolute; inset:0; border-radius:var(--radius); pointer-events:none; z-index:0;
    box-shadow: 0 0 0 1px color-mix(in oklab, var(--text) 20%, var(--border)) inset,
                0 0 36px rgba(255,255,255,0.08);
    opacity:.5;
  }
  /* Multi‑coloured outer shadow on hover */
  #contact .contact-card{
    box-shadow: var(--shadow);
    filter: drop-shadow(0 0 0 rgba(0,0,0,0));
  }
  #contact .contact-card:hover,
  #contact .contact-card:focus-within{
    /* Layered white glow */
    filter:
      drop-shadow(0 10px 24px rgba(255,255,255,0.08))
      drop-shadow(0 14px 36px rgba(255,255,255,0.10))
      drop-shadow(0 18px 52px rgba(255,255,255,0.12))
      drop-shadow(0 22px 72px rgba(255,255,255,0.14));
  }
  /* Black card face with grid + subtle mouse-follow reflection (no multicolour backdrop) */
  #contact .contact-card{
    background:
      /* mouse-follow highlight */
      radial-gradient(160px 160px at var(--mx, -100px) var(--my, -100px), rgba(255,255,255,.12), transparent 60%),
      /* vertical fade for readability */
      linear-gradient(180deg, color-mix(in oklab, var(--bg) 92%, transparent), transparent),
      /* grid lines */
  repeating-linear-gradient(90deg, color-mix(in oklab, var(--text) 10%, transparent) 0 1px, transparent 1px 18px),
  repeating-linear-gradient(0deg, color-mix(in oklab, var(--text) 8%, transparent) 0 1px, transparent 1px 18px),
      /* base */
      var(--card);
    transition: box-shadow .3s var(--ease), filter .3s var(--ease), transform .18s var(--ease);
    will-change: transform;
  }
  /* Center card in viewport with more outer breathing room */
  #contact.panel{ padding: min(16vh, 180px) min(8vw, 96px) }
  #contact .container{ display:grid; place-items:center; width:100% }
  /* Taller/narrower card with centered content */
  #contact .contact-card{
    max-width: 520px; width: 88%; min-height: 420px;
    padding: 56px 36px 48px;
    display:flex; flex-direction:column; align-items:center; justify-content:center; gap:18px;
    text-align:center;
  }
  #contact .contact-card p.muted{ margin: 0; line-height: 1.8 }
  #contact .contact-card .cta-row{ margin: 0 }
  #contact .contact-card .availability{ margin-top: 8px }
  @media (max-width: 600px){
    #contact.panel{ padding: min(12vh, 120px) min(5vw, 40px) }
    #contact .contact-card{ max-width: 94%; width: 94%; min-height: 360px; padding: 40px 20px 32px; gap:16px }
  }
  /* Sizing and whitespace: taller card, narrower width, more breathing room */
  #contact .contact-card{ max-width: 560px; width: 92%; padding: 44px 28px 36px; min-height: 360px }
  #contact .contact-card h2{ margin: 0 0 12px 0 }
  #contact .contact-card p.muted{ margin: 8px 0 16px 0; line-height: 1.75 }
  #contact .contact-card .cta-row{ margin-top: 20px; gap: 12px }
  #contact .contact-card .availability{ margin-top: 20px }
  @media (max-width: 600px){
    #contact .contact-card{ max-width: 96%; width: 96%; padding: 32px 18px 28px; min-height: 320px }
  }
  /* Occasional diagonal glint sweep */
  #contact .contact-card::after{
    content:""; position:absolute; inset:-20% -10%; pointer-events:none; z-index:0;
    background: linear-gradient(115deg, transparent 45%, rgba(255,255,255,.08) 50%, transparent 55%);
    transform: translateX(-120%);
    transition: transform 1.1s var(--ease);
    mix-blend-mode: screen;
  }
  #contact .contact-card.glint::after{ transform: translateX(120%) }
  /* Particle canvas sits under content, above background/glow */
  #contact .contact-card > *{ position: relative; z-index: 1 }
  #contact .contact-card canvas.grid-particles{ position:absolute; inset:0; pointer-events:none; z-index:0; display:block }
  #contact .contact-card:hover{ box-shadow: var(--shadow) }
  @media (prefers-reduced-motion: reduce){
    /* no special handling needed; glint will not be scheduled via JS */
  }
  @media (max-width: 600px){
    .nav-inner{padding:0 10px}
    :root{ --nav-h: 56px; }
    .dots{ display:none; }
    .cta-row .btn{ width:100%; justify-content:center }
  }
</style>
</head>
<body>
<!-- Sticky Nav -->
<div class="nav" role="navigation" aria-label="Main">
  <div class="nav-inner">
    <a href="#home" class="brand">YOOJIN PARK</a>
    <nav id="nav-items" style="display:flex;gap:6px;">
      <a class="item link-plain" href="#home">Home</a>
      <a class="item" href="#capabilities">My scenes</a>
      <a class="item" href="#highlights">Highlights</a>
  <a class="item" href="#skills">Toolkits</a>
  <a class="item" href="#cases">Synopsis</a>
  <a class="item" href="#reviews">Reviews</a>
  <a class="item" href="#contact">Contact</a>
    </nav>
    <div style="display:flex;gap:8px;align-items:center">
      <button class="btn theme-toggle" id="themeToggle" aria-label="Toggle dark/light mode" title="Toggle theme">
        <!-- Show target icon: sun when in dark (switch to light), moon when in light (switch to dark) -->
        <svg class="theme-icon sun" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <circle cx="12" cy="12" r="4"/>
          <path d="M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M4.93 19.07l1.41-1.41M17.66 6.34l1.41-1.41"/>
        </svg>
        <svg class="theme-icon moon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
        </svg>
      </button>
    </div>
  </div>
  <div class="progress" id="progress"></div>
</div>

<!-- Pagination dots -->
<div class="dots" id="dots"></div>

<!-- Fullpage container -->
<div class="snapper" id="snapper" tabindex="0">
  <!-- Panels -->
  <section class="panel" id="home">
    <div class="bg-layer">
      <div class="stars" id="stars1"></div>
      <div class="dust" id="dust1"></div>
    </div>
    <div class="container hero-grid">
      <div class="reveal">
        
  <h1>Design that <span style="background:linear-gradient(90deg,var(--accent1),var(--accent2),var(--accent3));-webkit-background-clip:text;background-clip:text;color:transparent">simplifies, connects, and inspires</span></h1>
  <p class="muted" style="max-width:680px">Through thoughtful design, I transform complexity into simplicity, crafting visuals that connect deeply and inspire meaningful action.</p>
        <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:16px">
          <a href="Assets/scenes/resume2025.pdf" class="btn primary magnetic" target="_blank" rel="noopener" aria-label="Open résumé PDF in a new tab">Download résumé (PDF)<span class="ripple"></span></a>
        </div>
      </div>
      <div class="hero-viz reveal" aria-hidden="true">
        <canvas id="globe"></canvas>
        <div class="stage-label"><span id="stageText"></span></div>
      </div>
    </div>
  </section>

  <!-- New Capabilities section -->
  <section class="panel" id="capabilities">
    <div class="bg-layer">
      <div class="stars"></div>
      <div class="dust"></div>
    </div>
    <div class="container">
  <h2 class="reveal">My scenes</h2>
      <div class="grid grid-4" style="margin-top:16px">
  <div class="card pad sheen reveal scene-card" data-img-light="Assets/scenes/1.jpg" data-img-dark="Assets/scenes/1.jpg">
          <div class="cap"><div class="scene">Scene 01</div><div class="tc">00:00:00:00</div></div>
          <div class="frame">
          </div>
          <h3>Motion Graphics & Video Expert</h3>
          <p class="muted">Bringing Ideas to Life Through Dynamic Visuals</p>
        </div>
  <div class="card pad sheen reveal scene-card" data-img-light="Assets/scenes/2.jpg" data-img-dark="Assets/scenes/2.jpg">
          <div class="cap"><div class="scene">Scene 02</div><div class="tc">00:00:10:00</div></div>
          <div class="frame">
          </div>
          <h3>Design Across Mediums</h3>
          <p class="muted">Crafting Stunning Presentations, Print, and Web Experiences</p>
        </div>
  <div class="card pad sheen reveal scene-card" data-img-light="Assets/scenes/3.jpg" data-img-dark="Assets/scenes/3.jpg">
          <div class="cap"><div class="scene">Scene 03</div><div class="tc">00:00:20:00</div></div>
          <div class="frame">
          </div>
          <h3>Branding & Visual Identity</h3>
          <p class="muted">Creating Memorable Brands and Impactful Visual Stories</p>
        </div>
  <div class="card pad sheen reveal scene-card" data-img-light="Assets/scenes/4.jpg" data-img-dark="Assets/scenes/4.jpg">
          <div class="cap"><div class="scene">Scene 04</div><div class="tc">00:00:30:00</div></div>
          <div class="frame">
          </div>
          <h3>AI Enthusiast</h3>
          <p class="muted">Exploring the Future of Design Through Artificial Intelligence</p>
        </div>
      </div>
    </div>
  </section>

  <section class="panel" id="highlights">
    <div class="bg-layer">
      <div class="stars" id="stars2"></div>
      <div class="dust" id="dust2"></div>
    </div>
    <div class="container">
      <h2 class="reveal">Impact highlights</h2>
      <p class="muted reveal" style="max-width:720px">Data‑driven KPIs that pair with the scenes, measuring outcomes not just outputs.</p>
      <div class="impact-grid">
            <div class="kpi-card sheen reveal kpi-pink">
              <div class="flip-inner" role="button" tabindex="0" aria-pressed="false" aria-label="Flip KPI for details">
                <div class="flip-face front">
                  <div class="kpi-heading">
                    <span class="kpi-prefix">▲</span>
                    <span class="kpi-number" data-target="45">0</span>
                    <span class="kpi-suffix">%</span>
                    <span class="kpi-text">Growth in social media engagement through compelling visual storytelling in video content</span>
                  </div>
                </div>
                <div class="flip-face back">
                  <div class="back-title">How it’s measured</div>
                  <div class="back-note">Measured through aggregated client analytics—tracking likes, shares, comments, and reach before and after campaign launches.</div>
                </div>
              </div>
            </div>
            <div class="kpi-card sheen reveal kpi-purple">
              <div class="flip-inner" role="button" tabindex="0" aria-pressed="false" aria-label="Flip KPI for details">
                <div class="flip-face front">
                  <div class="kpi-heading">
                    <span class="kpi-number" data-target="140">0</span>
                    <span class="kpi-plus">+</span>
                    <span class="kpi-text">Proposals, IR decks, whitepapers, and booklets designed for <span class="nowrap">60+ startups/agencies</span> <span class="kpi-meta">(2024–2025)</span></span>
                  </div>
                </div>
                <div class="flip-face back">
                  <div class="back-title">How it’s measured</div>
                  <div class="back-note">Verified via a maintained project log, ensuring accurate counts across diverse deliverables and clients.</div>
                </div>
              </div>
            </div>
            <div class="kpi-card sheen reveal kpi-blue">
              <div class="flip-inner" role="button" tabindex="0" aria-pressed="false" aria-label="Flip KPI for details">
                <div class="flip-face front">
                  <div class="kpi-heading">
                    <span class="kpi-prefix">▲</span>
                    <span class="kpi-number" data-target="25">0</span>
                    <span class="kpi-suffix">%</span>
                    <span class="kpi-text">Boost in brand recognition following a rebranding and visual identity transformation</span>
                  </div>
                </div>
                <div class="flip-face back">
                  <div class="back-title">How it’s measured</div>
                  <div class="back-note">Based on client brand awareness surveys and post-project recall tests compared to pre-rebrand benchmarks.</div>
                </div>
              </div>
            </div>
            <div class="kpi-card sheen reveal kpi-green">
              <div class="flip-inner" role="button" tabindex="0" aria-pressed="false" aria-label="Flip KPI for details">
                <div class="flip-face front">
                  <div class="kpi-heading">
                    <span class="kpi-prefix">▲</span>
                    <span class="kpi-number" data-target="75">0</span>
                    <span class="kpi-suffix">%</span>
                    <span class="kpi-text">Increase in creative output after integrating AI tools into the design process</span>
                  </div>
                </div>
                <div class="flip-face back">
                  <div class="back-title">How it’s measured</div>
                  <div class="back-note">Calculated from reduced turnaround times and increased asset volume after adopting AI‑driven workflows.</div>
                </div>
              </div>
            </div>
      </div>
    </div>
  </section>

  <section class="panel" id="skills">
    <div class="bg-layer">
      <div class="stars" id="stars3"></div>
      <div class="dust" id="dust3"></div>
    </div>
    <div class="container">
  <h2 class="reveal">Toolkits</h2>
      <div class="grid grid-6">
  <div class="card pad sheen reveal toolkit-card" tabindex="0" role="button" aria-pressed="false">
          <h3>🎬 Design & Storytelling</h3>
          <div class="toolkit-badges">
            <span class="badge">Figma</span>
            <span class="badge">Framer</span>
            <span class="badge">Photoshop</span>
            <span class="badge">Illustrator</span>
            <span class="badge">InDesign</span>
            <span class="badge">After Effects</span>
            <span class="badge">Premiere Pro</span>
            <span class="badge">Canva</span>
            <span class="badge">Procreate</span>
            <span class="badge">Blender</span>
            <span class="badge">Unity</span>
            <span class="badge">Tableau</span>
            <span class="badge">Flourish</span>
            <span class="badge">Webflow</span>
            <span class="badge">FigJam</span>
            <span class="badge">Miro</span>
            <span class="badge">Spline</span>
          </div>
        </div>
  <div class="card pad sheen reveal toolkit-card" tabindex="0" role="button" aria-pressed="false">
          <h3>📊 Research & Experience Design</h3>
          <div class="toolkit-badges">
            <span class="badge">User Research</span>
            <span class="badge">Usability Study</span>
            <span class="badge">Affinity Mapping</span>
            <span class="badge">Persona Building</span>
            <span class="badge">Journey Mapping</span>
            <span class="badge">Wireframing (Low‑Fi)</span>
            <span class="badge">Wireframing (High‑Fi)</span>
            <span class="badge">Prototyping</span>
            <span class="badge">UI/UX Animation</span>
            <span class="badge">Data Visualisation</span>
            <span class="badge">Infographics</span>
            <span class="badge">A/B Testing</span>
            <span class="badge">Heuristic Review</span>
            <span class="badge">Card Sorting</span>
            <span class="badge">Information Architecture</span>
            <span class="badge">Google Analytics (GA4)</span>
          </div>
        </div>
  <div class="card pad sheen reveal toolkit-card" tabindex="0" role="button" aria-pressed="false">
          <h3>🎭 Branding & Visual Identity</h3>
          <div class="toolkit-badges">
            <span class="badge">Logo Design</span>
            <span class="badge">Brand Guidelines</span>
            <span class="badge">Banner Design</span>
            <span class="badge">Merchandise Mockups</span>
            <span class="badge">Social Media Visuals</span>
            <span class="badge">Presentation Design</span>
            <span class="badge">Motion Graphics</span>
            <span class="badge">Video Editing</span>
            <span class="badge">Photography</span>
            <span class="badge">Photo Editing</span>
            <span class="badge">3D Design</span>
            <span class="badge">Brand Strategy</span>
            <span class="badge">Art Direction</span>
            <span class="badge">Typography</span>
            <span class="badge">Iconography</span>
            <span class="badge">Packaging Design</span>
            <span class="badge">Campaign Design</span>
          </div>
        </div>
  <div class="card pad sheen reveal toolkit-card" tabindex="0" role="button" aria-pressed="false">
          <h3>🤖 AI & Emerging Tech</h3>
          <div class="toolkit-badges">
            <span class="badge">Midjourney</span>
            <span class="badge">Leonardo AI</span>
            <span class="badge">Ideogram</span>
            <span class="badge">Runway</span>
            <span class="badge">Veo3</span>
            <span class="badge">ChatGPT</span>
            <span class="badge">Gemini</span>
            <span class="badge">NotebookLM</span>
            <span class="badge">Stable Diffusion</span>
            <span class="badge">Vibe Coding</span>
            <span class="badge">Gen‑AI for Wireframing</span>
            <span class="badge">Concept Development</span>
            <span class="badge">Adobe Firefly</span>
            <span class="badge">Claude</span>
            <span class="badge">DALL·E</span>
            <span class="badge">Pika</span>
          </div>
        </div>
  <div class="card pad sheen reveal toolkit-card" tabindex="0" role="button" aria-pressed="false">
          <h3>🛠 Workflow & Collaboration</h3>
          <div class="toolkit-badges">
            <span class="badge">Jira</span>
            <span class="badge">Slack</span>
            <span class="badge">Microsoft 365</span>
            <span class="badge">Google Workspace</span>
            <span class="badge">WIX</span>
            <span class="badge">Squarespace</span>
            <span class="badge">WordPress</span>
            <span class="badge">Square</span>
            <span class="badge">Notion</span>
            <span class="badge">GitHub</span>
          </div>
        </div>
  <div class="card pad sheen reveal toolkit-card" tabindex="0" role="button" aria-pressed="false">
          <h3>💻 Development Basics</h3>
          <div class="toolkit-badges">
            <span class="badge">HTML</span>
            <span class="badge">CSS</span>
            <span class="badge">JavaScript</span>
            <span class="badge">Python</span>
            <span class="badge">Three.js</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="panel" id="cases">
    <div class="bg-layer">
      <div class="stars" id="stars4"></div>
      <div class="dust" id="dust4"></div>
    </div>
    <div class="container">
  <h2 class="reveal">Synopsis</h2>
      <div class="grid grid-2" style="margin-top:16px">
  <div class="card pad sheen reveal" data-cover-light="Assets/scenes/radius.jpg" data-cover-dark="Assets/scenes/radius.jpg">
          <div class="project-thumb"></div>
          <h3 style="margin-top:10px">Strive to Radius: Insight lives on</h3>
          <p class="muted">A three‑year creative collaboration shaping the brand’s visual storytelling across decks, reports, videos, and marketing assets from its Strive beginnings to the Radius era.</p>
          <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:10px">
            <button class="btn magnetic open-modal" data-modal-title="Radius">Read More<span class="ripple"></span></button>
          </div>
        </div>
  <div class="card pad sheen reveal" data-cover-light="Assets/scenes/abloom.jpg" data-cover-dark="Assets/scenes/abloom.jpg">
          <div class="project-thumb"></div>
          <h3 style="margin-top:10px">Abloom: The Startup Story collection</h3>
          <p class="muted">Designed decks, websites, and brand assets for 60+ global startups based in South Korea, turning complex tech ideas into persuasive visual stories that drive results.</p>
          <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:10px">
            <button class="btn magnetic open-modal" data-modal-title="Abloom">Read More<span class="ripple"></span></button>
          </div>
        </div>
      </div>
    </div>
  </section>


  <section class="panel" id="reviews">
    <div class="bg-layer">
      <div class="stars" id="stars5"></div>
      <div class="dust" id="dust5"></div>
    </div>
    <div class="container">
  <h2 class="reveal">Reviews</h2>
      <div class="reviews-wrap reveal" style="margin-top:16px">
        <div class="reviews-track" id="reviewsTrack">
      <div class="card pad sheen review">
            <div class="review-head">
              <div class="who">
                <strong>Alex Kim</strong>
                <span class="muted">Product Manager in Cyber Security</span>
              </div>
              <div class="starbar" aria-label="5.0 out of 5 stars" title="5.0 out of 5">
                <span>★★★★★</span>
                <span class="rating">5.0</span>
              </div>
            </div>
            <p class="muted">“With expertise, they delivered solid structure and design with great storytelling, resulting in a complete and well-crafted piece. I highly recommend them as a great partner, especially for startups and business owners.”</p>
          </div>
          <div class="card pad sheen review">
            <div class="review-head">
              <div class="who">
                <strong>Hazel Nam</strong>
                <span class="muted">CEO in Beauty Device</span>
              </div>
              <div class="starbar" aria-label="5.0 out of 5 stars" title="5.0 out of 5">
                <span>★★★★★</span>
                <span class="rating">5.0</span>
              </div>
            </div>
            <p class="muted">“Thank you for the quick turnaround and high-quality work! Even when there were delays on my end in sharing content during the collaboration, you were understanding and delivered the final work quickly after receiving the materials. I was very satisfied with the design, and I really appreciated how well you incorporated feedback.”</p>
          </div>
          <div class="card pad sheen review">
            <div class="review-head">
              <div class="who">
                <strong>Julie Kang</strong>
                <span class="muted">CEO in Travel Agency</span>
              </div>
              <div class="starbar" aria-label="5.0 out of 5 stars" title="5.0 out of 5">
                <span>★★★★★</span>
                <span class="rating">5.0</span>
              </div>
            </div>
            <p class="muted">“It’s amazing how much transformation you brought to our deck and website’s branding and visuals in such a short time!”</p>
          </div>
          <div class="card pad sheen review">
            <div class="review-head">
              <div class="who">
                <strong>Steve Lee</strong>
                <span class="muted">Marketing in University</span>
              </div>
              <div class="starbar" aria-label="5.0 out of 5 stars" title="5.0 out of 5">
                <span>★★★★★</span>
                <span class="rating">5.0</span>
              </div>
            </div>
            <p class="muted">“I made a last-minute request, and you delivered a perfect piece in such a short time. Don’t waste time and money trying to do it yourself. I recommend leaving it to Yoojin, the expert. Thank you again for the quick turnaround, and I look forward to working together again.”</p>
          </div>
          <div class="card pad sheen review">
            <div class="review-head">
              <div class="who">
                <strong>Eunha Kim</strong>
                <span class="muted">Marketing in Robotics</span>
              </div>
              <div class="starbar" aria-label="5.0 out of 5 stars" title="5.0 out of 5">
                <span>★★★★★</span>
                <span class="rating">5.0</span>
              </div>
            </div>
            <p class="muted">“At first, I only requested a few infographic slides, but the quality and content were so perfect that I immediately asked for additional work. For the project we’re preparing now, I had reached out to many different service providers, and your results were by far the best. It’s not just that the design is great, you have an outstanding ability to truly understand the content and pinpoint the key messages. Our company will definitely work with you again for future projects. And if anyone is hesitating, honestly, looking for other designers is a waste of time. Right here, right now, send your request. You won’t regret it!”</p>
          </div>
        </div>
        <div class="reviews-dots" id="reviewsDots" aria-label="Reviews pagination"></div>
      </div>
    </div>
  </section>

  <section class="panel" id="contact">
    <div class="bg-layer">
      <div class="stars" id="stars6"></div>
      <div class="dust" id="dust6"></div>
    </div>
    <div class="container">
      <div class="card pad reveal contact-card" style="text-align:center; backdrop-filter: blur(2px)">
        <canvas class="grid-particles" aria-hidden="true"></canvas>
        <h2>Open to roles & collabs</h2>
  <div class="cta-row">
          <a id="contactEmail" class="btn primary magnetic" href="#" data-user="yoojin0403" data-domain="gmail.com" aria-label="Send an email">✉ Email me<span class="ripple"></span></a>
          <a class="btn magnetic" href="https://github.com/Yoojinious" target="_blank" rel="noopener" aria-label="Open GitHub profile in a new tab">GitHub<span class="ripple"></span></a>
          <a class="btn magnetic" href="https://www.linkedin.com/in/yoojin-park-design/" target="_blank" rel="noopener" aria-label="Open LinkedIn profile in a new tab">LinkedIn<span class="ripple"></span></a>
          <a class="btn" href="Assets/scenes/resume2025.pdf" target="_blank" rel="noopener">Résumé (PDF)</a>
        </div>
      </div>
    </div>
  </section>
</div>

<!-- Modal template -->
<div class="modal" id="modal">
  <div class="modal-card">
    <div class="modal-head"><strong id="modal-title">Details</strong><span class="close" data-close>✕</span></div>
    <div class="modal-body" id="modal-body">
      <div class="card pad">This is a placeholder. Replace with your real STAR or demo media.</div>
    </div>
  </div>
</div>

<script>
(function(){
  const isTouch = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
  const reduceMotion = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
  const scroller = document.getElementById('snapper');
  const panels = Array.from(document.querySelectorAll('.panel'));
  const navLinks = Array.from(document.querySelectorAll('.nav a.item'));
  const progress = document.getElementById('progress');
  const dotsWrap = document.getElementById('dots');

  // Build dots (hidden on small screens via CSS)
  panels.forEach((p,i)=>{
    const d=document.createElement('div');
    d.className='dot'+(i===0?' active':'');
    d.title=p.id;
    d.addEventListener('click',()=> p.scrollIntoView({behavior:'smooth'}));
    dotsWrap.appendChild(d);
  });
  const dots = Array.from(dotsWrap.querySelectorAll('.dot'));
  const setActive = (i)=>{
    dots.forEach((d,idx)=> d.classList.toggle('active', idx===i));
    navLinks.forEach(a=> a.classList.toggle('active', a.getAttribute('href')==='#'+panels[i].id));
  };

  // Progress bar
  function updateProgress(){
    const t = scroller.scrollTop;
    const h = scroller.scrollHeight - scroller.clientHeight;
    const ratio = h>0 ? (t / h) : 0;
    progress.style.transform = `scaleX(${ratio})`;
  }

  // Reveal on view
  const io = new IntersectionObserver((entries)=>{
    entries.forEach(e=>{
      if(e.isIntersecting){
        const i = panels.indexOf(e.target);
        setActive(i);
        e.target.querySelectorAll('.reveal').forEach(el=> el.classList.add('show'));
      }
    });
  }, {root: scroller, threshold: .5});
  panels.forEach(p=> io.observe(p));

  scroller.addEventListener('scroll', updateProgress, {passive:true});

  // Keyboard navigation (desktop)
  function goTo(i){
    const idx = Math.max(0, Math.min(panels.length-1, i));
    panels[idx].scrollIntoView({behavior:'smooth'});
  }
  if(!isTouch){
    window.addEventListener('keydown', (e)=>{
      const active = dots.findIndex(d=> d.classList.contains('active'));
      if(['ArrowDown','PageDown',' '].includes(e.key)) { e.preventDefault(); goTo(active+1); }
      if(['ArrowUp','PageUp'].includes(e.key)) { e.preventDefault(); goTo(active-1); }
      if(e.key==='Home'){ e.preventDefault(); goTo(0); }
      if(e.key==='End'){ e.preventDefault(); goTo(panels.length-1); }
    });
  // Wheel snap disabled to avoid blocking natural scroll into Contact
  }

  // Click nav links => smooth scroll
  navLinks.forEach(a=> a.addEventListener('click', (e)=>{
    const id = a.getAttribute('href');
    const target = document.querySelector(id);
    if(target){
      e.preventDefault();
  target.scrollIntoView({behavior:'smooth'});
    }
  }));

  // Parallax backgrounds: subtle and clamped; lighter on mobile
  const bgSets = panels.map(p => ({
    stars: p.querySelector('.stars'),
    dust: p.querySelector('.dust')
  }));
  const starMul = reduceMotion ? 0 : (isTouch ? 0.02 : 0.04);
  const dustMul = reduceMotion ? 0 : (isTouch ? 0.012 : 0.02);
  function parallax(){
    if(reduceMotion) return; // disable parallax
    const t = scroller.scrollTop;
    const h = scroller.clientHeight;
    panels.forEach((p, i)=>{
      const top = i*h - t;
      const s = bgSets[i].stars, d = bgSets[i].dust;
      if(!s || !d) return;
      const shift = Math.max(Math.min(top * starMul, 400), -400);
      const depth = Math.max(Math.min(top * dustMul, 120), -120);
      s.style.transform = `translateY(${shift}px) translateX(${depth}px)`;
      d.style.transform = `translateY(${shift*0.6}px) translateX(${depth*0.4}px)`;
      const vis = 1 - Math.min(Math.abs(top)/h, 1);
      s.style.opacity = 0.15 + vis*0.6;
      d.style.opacity = 0.15 + vis*0.6;
    });
    requestAnimationFrame(parallax);
  }
  requestAnimationFrame(parallax);

  // Hero blob parallax (small on mobile)
  const blobs = document.querySelectorAll('#home .blob');
  if(!reduceMotion){
  scroller.addEventListener('scroll', ()=>{
    const t = scroller.scrollTop;
    const clamp = (v,min,max)=> Math.max(min, Math.min(max, v));
    blobs.forEach(b=>{
      const d = parseFloat(b.dataset.depth||'10');
      const lim = isTouch ? 30 : 80;
      const x = clamp((t/d), -lim, lim);
      const y = clamp((t/d)*-0.6, -lim*0.6, lim*0.6);
      b.style.transform = `translate(${x}px, ${y}px)`;
    });
  }, {passive:true});
  }

  // Magnetic buttons + ripple (desktop only)
  if(!isTouch && !reduceMotion){
    document.querySelectorAll('.magnetic').forEach(btn=>{
      btn.addEventListener('mousemove', (e)=>{
        const r = btn.getBoundingClientRect();
        const x = e.clientX - (r.left + r.width/2);
        const y = e.clientY - (r.top + r.height/2);
        btn.style.transform = `translate(${x*0.04}px, ${y*0.06}px)`;
        const ripple = btn.querySelector('.ripple');
        if(ripple){
          ripple.style.setProperty('--rx', `${x}px`);
          ripple.style.setProperty('--ry', `${y}px`);
        }
      });
      btn.addEventListener('mouseleave', ()=> btn.style.transform = 'translate(0,0)');
    });
  }

  // 3D tilt cards (desktop only)
  if(!isTouch && !reduceMotion){
    document.querySelectorAll('.project, .sheen').forEach(el=>{
      el.addEventListener('mousemove', (e)=>{
        const r = el.getBoundingClientRect();
        const x = (e.clientX - r.left)/r.width - .5;
        const y = (e.clientY - r.top)/r.height - .5;
        el.style.transform = `perspective(800px) rotateX(${(-y*3).toFixed(2)}deg) rotateY(${(x*4).toFixed(2)}deg)`;
      });
      el.addEventListener('mouseleave', ()=> el.style.transform = 'none');
    });
  }

  // Modal (single template)
  const modal = document.getElementById('modal');
  const modalTitle = document.getElementById('modal-title');
  const modalBody = document.getElementById('modal-body');
  const modalHead = document.querySelector('#modal .modal-head');
  const modalCard = document.querySelector('#modal .modal-card');
  const starCopy = {
    'Radius': `
<div class="card pad" style="border:none;background:transparent;box-shadow:none;padding:0">
  <div class="story-block" style="display:flex;flex-direction:column;gap:14px;line-height:1.6">
    <p class="trackable">For over three years, I worked alongside researchers, strategists, and marketers to turn complex insights into something people could easily understand and act on. From the early Strive days through to the Radius Tech transformation, I helped shape the brand’s visual story across hundreds of decks, reports, videos, and marketing assets.</p>
    <p class="trackable">Some of my favourite moments came from creating websites that showcased research and campaigns in a way that was visually engaging yet easy to navigate pages that made even the most data‑heavy findings feel accessible. I also helped produce VOX Pop videos for different clients, capturing real voices and reactions to bring the insights to life and add an authentic human layer to the data.</p>
    <p class="trackable">Beyond client‑facing work, I ran workshops on Figma and design principles to help internal teams work more efficiently and stay aligned on visual standards. These sessions weren’t just about tools they were about building confidence and a shared creative language across the company.</p>
    <p class="trackable">When it came time to move from Strive to Radius, I played a role in rebranding helping translate the new positioning into a fresh visual identity that worked across motion, digital, and print. Having been part of the journey from the start meant I could ensure everything stayed connected, consistent, and true to the brand’s evolution.</p>

    <div class="section-title">Principles</div>
    <div style="display:flex; gap:8px; flex-wrap:wrap">
      <span class="badge">Clarity over cleverness</span>
      <span class="badge">Narrative hierarchy</span>
      <span class="badge">Accessibility by default</span>
      <span class="badge">Consistency & reusability</span>
      <span class="badge">Data → story</span>
      <span class="badge">Systems thinking</span>
    </div>

    <div class="section-title">Process highlights</div>
    <ul class="story-list">
      <li><strong>Discover:</strong> stakeholder interviews, brief alignment, success metrics.</li>
      <li><strong>Synthesize:</strong> story arcs, IA and components mapped to audiences.</li>
      <li><strong>Systemize:</strong> design tokens, slide libraries, motion templates.</li>
      <li><strong>Design & iterate:</strong> fast visuals, weekly crits, narrative QA.</li>
      <li><strong>Validate & ship:</strong> review loops, capture learnings, handoff.</li>
    </ul>

    <div class="section-title">Problem‑solving</div>
    <ul class="story-list">
      <li>Reduced decision friction by establishing a single slide system and narrative checkpoints to align research, strategy, and marketing early.</li>
      <li>Made dense insights scannable by introducing progressive disclosure patterns and data‑to‑story framing.</li>
      <li>Accelerated delivery by templatizing motion builds and codifying brand tokens for web and video.</li>
    </ul>

    <div class="section-title">Collaboration</div>
    <div class="team-badges">
      <span class="badge">Research</span>
      <span class="badge">Strategy</span>
      <span class="badge">Marketing</span>
      <span class="badge">Engineering</span>
      <span class="badge">Leadership</span>
    </div>

    <div class="section-title">Key outcomes</div>
    <div style="display:flex; gap:8px; flex-wrap:wrap">
      <span class="badge"><strong>Hundreds+</strong> deliverables shipped</span>
      <span class="badge">Cross‑team enablement via Figma workshops</span>
      <span class="badge">Brand replatform across motion, digital, print</span>
    </div>
  </div>
</div>`,
    'Abloom': `
<div class="card pad" style="border:none;background:transparent;box-shadow:none;padding:0">
  <div class="story-block" style="display:flex;flex-direction:column;gap:14px;line-height:1.6">
    <p class="trackable">Since 2023, I’ve worked with more than 60 startups and agencies under my freelance practice, Abloom. Across 140+ projects, I help founders and teams bring ideas to life through investor decks, websites, white papers, brochures, branding, and marketing materials.</p>
    <p class="trackable">I collaborated across cybersecurity, crypto, education, med‑tech, and consumer. I prototyped websites that were visually engaging and on‑brand, and designed white papers and brochures that communicated complex ideas clearly and professionally to build credibility with investors, partners, and customers.</p>
    <p class="trackable">Each engagement starts by understanding the story and audience, then shaping it into a visual narrative that’s compelling and easy to follow.</p>

    <div class="section-title">Principles</div>
    <div style="display:flex; gap:8px; flex-wrap:wrap">
      <span class="badge">Story first</span>
      <span class="badge">Design for speed & iteration</span>
      <span class="badge">Evidence‑backed visuals</span>
      <span class="badge">Consistency at scale</span>
      <span class="badge">Accessible by default</span>
    </div>

    <div class="section-title">Process highlights</div>
    <ul class="story-list">
      <li><strong>Rapid brief:</strong> business goal, audience, core message, proof.</li>
      <li><strong>Draft fast:</strong> low‑fi structure, narrative beats, key visuals.</li>
      <li><strong>Refine & systemize:</strong> templates, tokens, component libraries.</li>
      <li><strong>Validate:</strong> async reviews, stakeholder alignment, handoff.</li>
    </ul>

    <div class="section-title">Problem‑solving</div>
    <ul class="story-list">
      <li>Transformed technical jargon into investor‑ready narratives with clear through‑lines and defensible proof points.</li>
      <li>Standardized deck systems to reduce rework and enable faster iteration for founders on tight timelines.</li>
      <li>Created web and brand kits that scale across teams and vendors without losing quality.</li>
    </ul>

    <div class="section-title">Collaboration</div>
    <div class="team-badges">
      <span class="badge">Founders</span>
      <span class="badge">Product</span>
      <span class="badge">Marketing</span>
      <span class="badge">Agency partners</span>
      <span class="badge">Developers</span>
    </div>

    <div class="section-title">Key outcomes</div>
    <div style="display:flex; gap:8px; flex-wrap:wrap">
      <span class="badge"><strong>60+</strong> startups & agencies</span>
      <span class="badge"><strong>140+</strong> projects delivered</span>
      <span class="badge">Investor‑ready narratives & brand systems</span>
    </div>
  </div>
</div>`
  };

  document.querySelectorAll('.open-modal').forEach((b, idx)=>{
    b.addEventListener('click', ()=>{
      const t = b.getAttribute('data-modal-title');
      const title = t || (idx % 2 ? 'System demo' : 'STAR details');
  modalTitle.textContent = title;
  // Header background cover for specific cases
  modalHead.classList.remove('radius-cover','abloom-cover');
  if(title === 'Radius') modalHead.classList.add('radius-cover');
  if(title === 'Abloom') modalHead.classList.add('abloom-cover');
  // Modal card case tint
  modalCard.classList.remove('case-radius','case-abloom');
  if(title === 'Radius') modalCard.classList.add('case-radius');
  if(title === 'Abloom') modalCard.classList.add('case-abloom');
      modalBody.innerHTML = starCopy[title] || '<div class="card pad">This is a placeholder. Replace with your real STAR or demo media.</div>';
      // Stagger in paragraphs
      const reduceMotion = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      if(!reduceMotion){
        modalBody.classList.add('animating');
        // Collect all reveal targets in reading order
        const targets = Array.from(modalBody.querySelectorAll(
          '.story-block p, .story-block .section-title, .story-block .story-list li, .story-block .team-badges .badge, .story-block > div[style*="display:flex"] .badge'
        ));
        // Aim for a total sequence of ~10–15s depending on count
        const totalMin = 10000, totalMax = 15000;
        const baseDelay = 200; // slight pause before first

        // If the content starts with multiple paragraphs (like Radius intro), space them further apart
        let leadingPCount = 0;
        for (let i = 0; i < targets.length; i++) {
          const el = targets[i];
          if (el.tagName === 'P') leadingPCount++; else break;
        }

        // Larger gap for the first paragraphs so they don't appear at once
        const introStep = leadingPCount > 1 ? 1400 : 0; // ms between the first paragraphs
        // Compute rest step to roughly fit within totalMin window
        const remainingCount = Math.max(0, targets.length - leadingPCount);
        const budgetForRest = Math.max(0, (totalMin - baseDelay) - (leadingPCount * introStep));
        const stepRest = remainingCount > 0 ? Math.max(80, Math.floor(budgetForRest / remainingCount)) : 0;

        const delays = new Array(targets.length).fill(0);
        const durations = new Array(targets.length).fill(0);
        let currentDelay = baseDelay;
        targets.forEach((el, i)=>{
          el.classList.add('p-reveal');
          const isTiny = el.tagName === 'SPAN' || el.tagName === 'LI' || el.classList.contains('badge') || el.classList.contains('section-title');
          // Longer, gentler durations for the initial paragraph block
          const duration = (i < leadingPCount)
            ? (4500 + Math.random()*2000) // 4.5–6.5s for intro paragraphs
            : (isTiny ? (1200 + Math.random()*1200) : (2800 + Math.random()*1800));
          durations[i] = Math.round(duration);
          delays[i] = currentDelay;
          el.style.animationDelay = `${delays[i]}ms`;
          el.style.animationDuration = `${durations[i]}ms`;
          // Add spacing between intro paragraphs, and ensure a gap before the first non-intro element
          if (i < leadingPCount - 1) {
            currentDelay += introStep;
          } else if (i === leadingPCount - 1) {
            // after last intro paragraph, add a rest step so the next element doesn't overlap
            currentDelay += stepRest;
          } else {
            currentDelay += stepRest;
          }
        });
        // force reflow then start animations next frame
        void modalBody.offsetHeight;
        requestAnimationFrame(()=>{
          targets.forEach(el=> el.classList.add('start'));
          // Compute end of sequence (max end)
          let maxEnd = 0;
          targets.forEach((_, i)=>{
            const end = (delays[i]) + durations[i];
            if(end > maxEnd) maxEnd = end;
          });
          // Keep within 10–15s by capping if needed
          const cap = Math.min(Math.max(maxEnd, totalMin), totalMax);
          setTimeout(()=> modalBody.classList.remove('animating'), cap + 120);
        });
      }
      modal.classList.add('show');
    });
  });
  function closeModal(){
    modal.classList.remove('show');
    // Cleanup reveal classes to avoid stale state
  modalHead.classList.remove('radius-cover','abloom-cover');
  modalCard.classList.remove('case-radius','case-abloom');
    modalBody.classList.remove('animating');
    modalBody.querySelectorAll('.story-block p, .story-block .section-title, .story-block .story-list li, .story-block .team-badges .badge, .story-block > div[style*="display:flex"] .badge').forEach(el=>{
      el.classList.remove('p-reveal','start');
      el.style.animationDelay = '';
      el.style.animationDuration = '';
    });
  }
  modal.querySelector('[data-close]').addEventListener('click', closeModal);
  modal.addEventListener('click', (e)=>{ if(e.target===modal) closeModal(); });

  // Theme-aware covers for Synopsis cards
  (function(){
    function isLight(){ return (document.documentElement.getAttribute('data-theme')||'dark') === 'light'; }
    function applySynopsisCovers(){
      document.querySelectorAll('#cases .card.pad.sheen.reveal').forEach(card=>{
        const thumb = card.querySelector('.project-thumb');
        if(!thumb) return;
        const src = isLight() ? card.getAttribute('data-cover-light') : card.getAttribute('data-cover-dark');
        if(src){ thumb.style.backgroundImage = `url("${src}")`; }
      });
    }
    const moCovers = new MutationObserver(applySynopsisCovers);
    moCovers.observe(document.documentElement, { attributes:true, attributeFilter:['data-theme'] });
    applySynopsisCovers();
  })();

  // Projects section removed; filter logic removed

  // Initial reveal for first panel
  panels[0].querySelectorAll('.reveal').forEach(el=> el.classList.add('show'));
  
  // Reviews slider
  (function(){
    const reduceMotion = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    const wrap = document.getElementById('reviewsTrack');
    const dots = document.getElementById('reviewsDots');
    if(!wrap || !dots) return;
    const items = Array.from(wrap.querySelectorAll('.review'));
    let idx = 0; let timer; let playing = true; let inView = false;
    function buildDots(){
      dots.innerHTML = '';
      items.forEach((_,i)=>{
        const d = document.createElement('div');
        d.className = 'r-dot'+(i===0?' active':'');
        d.setAttribute('role','button');
        d.setAttribute('aria-label', `Go to review ${i+1}`);
        d.tabIndex = 0;
        d.addEventListener('click', ()=> go(i));
        d.addEventListener('keydown', (ev)=>{
          if(ev.key === 'Enter' || ev.key === ' '){ ev.preventDefault(); go(i); }
        });
        dots.appendChild(d);
      });
    }
    function slideWidth(){
      // Use the visible wrapper width for paging so one slide shows exactly
      const vp = wrap.parentElement.getBoundingClientRect().width;
      return vp;
    }
    function setActive(){
      const x = slideWidth();
      wrap.style.transform = `translateX(${-idx * x}px)`;
      Array.from(dots.children).forEach((d,i)=> d.classList.toggle('active', i===idx));
    }
    function next(){ idx = (idx + 1) % items.length; setActive(); }
    function prev(){ idx = (idx - 1 + items.length) % items.length; setActive(); }
    function go(i){ idx = Math.max(0, Math.min(items.length-1, i)); setActive(); }
    function play(){ if(reduceMotion) return; stop(); timer = setInterval(next, 4500); }
    function stop(){ if(timer) clearInterval(timer); }
    wrap.parentElement.addEventListener('mouseenter', ()=>{ playing=false; stop(); });
    wrap.parentElement.addEventListener('mouseleave', ()=>{ if(!reduceMotion){ playing=true; play(); } });
    buildDots(); setActive(); if(!reduceMotion) play();
    // Autoplay only when panel is in view
    const panel = document.getElementById('reviews');
    if(panel){
      const o = new IntersectionObserver((entries)=>{
        entries.forEach(e=>{
          if(e.isIntersecting){ inView = true; if(playing && !reduceMotion) play(); }
          else { inView = false; stop(); }
        });
      }, { root: document.getElementById('snapper'), threshold: 0.4 });
      o.observe(panel);
    }
    window.addEventListener('resize', setActive);

    // Keyboard arrow navigation and swipe/drag support
    const area = wrap.parentElement;
    area.setAttribute('tabindex','0');
    area.setAttribute('role','region');
    area.setAttribute('aria-label','Reviews carousel');
    area.addEventListener('keydown', (e)=>{
      if(e.key === 'ArrowRight'){ e.preventDefault(); next(); }
      else if(e.key === 'ArrowLeft'){ e.preventDefault(); prev(); }
    });

    let down = false, dragging = false, sx = 0, sy = 0, dx = 0;
    function onDown(e){
      if(e.pointerType === 'mouse' && e.button !== 0) return;
      // Ignore when starting from a dot/button
      if((e.target && (e.target.closest && e.target.closest('.reviews-dots')))) return;
      down = true; dragging = false; sx = e.clientX; sy = e.clientY; dx = 0;
      stop();
      wrap.style.transition = 'none';
      area.classList.add('dragging');
      try{ area.setPointerCapture && area.setPointerCapture(e.pointerId); }catch(_){}
    }
    function onMove(e){
      if(!down) return;
      const x = e.clientX, y = e.clientY;
      const ddx = x - sx; const ddy = y - sy;
      if(!dragging){
        if(Math.abs(ddx) > 10 && Math.abs(ddx) > Math.abs(ddy)) dragging = true; else return;
      }
      // Once dragging horizontally, prevent vertical scroll jitter
      if(e.cancelable) e.preventDefault();
      dx = ddx;
      const base = -idx * slideWidth();
      wrap.style.transform = `translateX(${base + dx}px)`;
    }
    function onUp(e){
      if(!down) return; down = false;
      try{ area.releasePointerCapture && area.releasePointerCapture(e.pointerId); }catch(_){}
      area.classList.remove('dragging');
      wrap.style.transition = '';
      const w = slideWidth();
      const threshold = Math.max(40, w * 0.18);
      if(dragging && Math.abs(dx) > threshold){
        if(dx < 0) next(); else prev();
      } else {
        setActive();
      }
      dx = 0; dragging = false;
      if(!reduceMotion && inView && !area.matches(':hover')) play();
    }
    area.addEventListener('pointerdown', onDown, { passive:false });
    area.addEventListener('pointermove', onMove, { passive:false });
    area.addEventListener('pointerup', onUp, { passive:false });
    area.addEventListener('pointercancel', onUp, { passive:false });
  })();

  // Sparkles on review hover (reduced-motion friendly)
  (function(){
    const reduceMotion = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    const cards = Array.from(document.querySelectorAll('#reviews .review'));
    if(!cards.length) return;
    let last = 0;
    function spawn(card, x, y){
      const s = document.createElement('span');
      s.className = 'sparkle';
      const size = (4 + Math.random()*6).toFixed(1);
      s.style.width = s.style.height = size+'px';
      s.style.left = x+'px';
      s.style.top = y+'px';
      s.style.animationDuration = (0.7 + Math.random()*0.7).toFixed(2)+'s';
      s.style.animationDelay = (Math.random()*0.15).toFixed(2)+'s';
      card.appendChild(s);
      s.addEventListener('animationend', ()=> s.remove(), { once:true });
    }
  cards.forEach(card=>{
      card.classList.add('sparkle-host');
      if(reduceMotion){
        card.addEventListener('pointerenter', ()=>{
          card.classList.add('rm-glow');
          setTimeout(()=> card.classList.remove('rm-glow'), 600);
        }, { passive:true });
        return;
      }
      card.addEventListener('pointerenter', ()=>{
        const rect = card.getBoundingClientRect();
        for(let i=0;i<10;i++){
          spawn(card, Math.random()*rect.width, Math.random()*rect.height);
        }
      }, { passive:true });
      card.addEventListener('pointermove', (e)=>{
    // Skip sparkles while the carousel is being dragged
    const wrapEl = card.closest('.reviews-wrap');
    if(wrapEl && wrapEl.classList.contains('dragging')) return;
        const now = performance.now();
        if(now - last < 120) return;
        last = now;
        const rect = card.getBoundingClientRect();
        spawn(card, e.clientX - rect.left, e.clientY - rect.top);
      }, { passive:true });
    });
  })();

  // Contact card: mouse-follow reflection + occasional glint
  (function(){
    const card = document.querySelector('#contact .contact-card');
    if(!card) return;
    const reduceMotion = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    const scroller = document.getElementById('snapper');
    const hoverOk = window.matchMedia && window.matchMedia('(hover:hover) and (pointer:fine)').matches;

    // Pointer-based reflection
    if(hoverOk){
      card.addEventListener('pointermove', (e)=>{
        const r = card.getBoundingClientRect();
        const x = e.clientX - r.left;
        const y = e.clientY - r.top;
        card.style.setProperty('--mx', x + 'px');
        card.style.setProperty('--my', y + 'px');
      }, { passive: true });
      card.addEventListener('pointerleave', ()=>{
        card.style.removeProperty('--mx');
        card.style.removeProperty('--my');
      }, { passive: true });
    }

    // Subtle 3D tilt on hover (desktop, not reduced motion)
    if(hoverOk && !reduceMotion){
      card.addEventListener('pointermove', (e)=>{
        const r = card.getBoundingClientRect();
        const px = (e.clientX - r.left)/r.width - 0.5;
        const py = (e.clientY - r.top)/r.height - 0.5;
        const rx = (-py * 5).toFixed(2); // up to ~5deg
        const ry = (px * 6).toFixed(2);  // up to ~6deg
        card.style.transform = `perspective(900px) rotateX(${rx}deg) rotateY(${ry}deg)`;
      }, { passive:true });
      card.addEventListener('pointerleave', ()=>{
        card.style.transform = 'none';
      }, { passive:true });
    }

    // Occasional glint while in view
    let timer = null;
    function schedule(){
      const delay = 3500 + Math.random()*4000; // 3.5s–7.5s
      timer = setTimeout(()=>{
        card.classList.add('glint');
        setTimeout(()=> card.classList.remove('glint'), 1200);
        schedule();
      }, delay);
    }

    const io = new IntersectionObserver((entries)=>{
      entries.forEach(e=>{
        if(e.isIntersecting){
          if(!reduceMotion && !timer) schedule();
        } else {
          if(timer){ clearTimeout(timer); timer = null; }
          card.classList.remove('glint');
        }
      });
    }, { root: scroller, threshold: 0.6 });
    io.observe(card);

    // Grid intersection particles
    const canvas = card.querySelector('canvas.grid-particles');
    if(!canvas) return;
  const ctx = canvas.getContext('2d');
  let dpr = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
  let rafId = null, spawnTimer = null;
  const gridX = 18; // matches repeating-linear grid spacing
  const gridY = 18;
  const maxParticles = 24;
    const particles = [];

    function resize(){
      const r = card.getBoundingClientRect();
      const w = Math.floor(r.width);
      const h = Math.floor(r.height);
      canvas.style.width = w + 'px';
      canvas.style.height = h + 'px';
      canvas.width = Math.floor(w * dpr);
      canvas.height = Math.floor(h * dpr);
      ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
    }
    resize();
    window.addEventListener('resize', resize, { passive:true });

    function randInt(min, max){ return Math.floor(Math.random()*(max-min+1))+min; }
    function rand(min, max){ return min + Math.random()*(max-min); }

    function spawnParticle(){
      const r = card.getBoundingClientRect();
      const cols = Math.max(1, Math.floor(r.width / gridX));
      const rows = Math.max(1, Math.floor(r.height / gridY));
      const cx = randInt(1, cols-1) * gridX + 0.5; // avoid very edges
      const cy = randInt(1, rows-1) * gridY + 0.5;
  const life = rand(280, 900);
  const size = rand(0.9, 2.6);
      const start = performance.now();
  particles.push({ x: cx, y: cy, life, size, start });
      if(particles.length > maxParticles) particles.shift();
    }

    function draw(now){
      ctx.clearRect(0,0,canvas.width, canvas.height);
      for(const p of particles){
        const t = (now - p.start) / p.life;
        if(t >= 1) continue;
        // Morse-like: brief on phase, then off
        const onFrac = 0.35;
        if(t > onFrac) continue;
        const ph = t / onFrac;
        const edge = 0.2;
        let gain = 1;
        if(ph < edge) gain = ph/edge; else if(ph > 1-edge) gain = (1-ph)/edge;
        const alpha = 0.12 * gain; // dimmer overall
        ctx.globalCompositeOperation = 'lighter';
        // core
        ctx.fillStyle = `rgba(255,255,255,${alpha*0.6})`;
        ctx.beginPath(); ctx.arc(p.x, p.y, p.size*1.15, 0, Math.PI*2); ctx.fill();
  // soft white glow
  ctx.fillStyle = `rgba(255,255,255,${alpha*0.22})`;
        ctx.beginPath(); ctx.arc(p.x, p.y, p.size*1.9, 0, Math.PI*2); ctx.fill();
      }
      rafId = requestAnimationFrame(draw);
    }

    function scheduleSpawns(){
      if(reduceMotion) return;
      // initial sprinkling
      for(let i=0;i<6;i++) spawnParticle();
      const loop = ()=>{
        // usually 1 particle, occasionally 2
        const n = Math.random() < 0.25 ? 2 : 1;
        for(let i=0;i<n;i++) spawnParticle();
        const next = rand(300, 1200); // random delay between spawns
        spawnTimer = setTimeout(loop, next);
      };
      loop();
    }

    // Start/stop with intersection
    const partIo = new IntersectionObserver((entries)=>{
      entries.forEach(e=>{
        if(e.isIntersecting){
          if(!rafId){ rafId = requestAnimationFrame(draw); }
          if(!spawnTimer) scheduleSpawns();
        } else {
          if(rafId){ cancelAnimationFrame(rafId); rafId = null; }
          if(spawnTimer){ clearTimeout(spawnTimer); spawnTimer = null; }
          particles.length = 0;
          ctx.clearRect(0,0,canvas.width, canvas.height);
        }
      });
    }, { root: scroller, threshold: 0.5 });
    partIo.observe(card);
  })();
})();
</script>
<script>
// Particle Globe with staged morphs (circle → heart → spread → globe)
(function(){
  const canvas = document.getElementById('globe');
  if(!canvas || !window.THREE) return;
  const reduceMotion = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;

  const scene = new THREE.Scene();
  const renderer = new THREE.WebGLRenderer({ canvas, antialias:true, alpha:true });
  renderer.setPixelRatio(Math.min(window.devicePixelRatio||1, 2));

  const camera = new THREE.PerspectiveCamera(45, 1, 0.1, 100);
  camera.position.set(0, 0, 3.2);
  scene.add(camera);

  // Base parameters
  const count = 2000;
  const sphereR = 1.1;

  // Geometry and material
  const positions = new Float32Array(count * 3);
  const geo = new THREE.BufferGeometry();
  geo.setAttribute('position', new THREE.BufferAttribute(positions, 3));
  // Soft circular sprite texture for round particles; tweak stops for light mode
  function makeCircleTexture(opts){
    const light = !!(opts && opts.light);
    const size = 64;
    const cvs = document.createElement('canvas');
    cvs.width = cvs.height = size;
    const ctx = cvs.getContext('2d');
    const r = size/2;
    const g = ctx.createRadialGradient(r, r, 0, r, r, r);
    if(light){
      // Slightly tighter, less additive-feeling core to read on white
      g.addColorStop(0.0, 'rgba(255,255,255,0.9)');
      g.addColorStop(0.28, 'rgba(255,255,255,0.52)');
      g.addColorStop(1.0, 'rgba(255,255,255,0)');
    }else{
      g.addColorStop(0.0, 'rgba(255,255,255,1)');
      g.addColorStop(0.35, 'rgba(255,255,255,0.7)');
      g.addColorStop(1.0, 'rgba(255,255,255,0)');
    }
    ctx.clearRect(0,0,size,size);
    ctx.fillStyle = g;
    ctx.beginPath();
    ctx.arc(r, r, r, 0, Math.PI*2);
    ctx.fill();
    const tex = new THREE.Texture(cvs);
    tex.needsUpdate = true;
    tex.minFilter = THREE.LinearFilter;
    tex.magFilter = THREE.LinearFilter;
    tex.generateMipmaps = false;
    return tex;
  }
  function isLight(){ return (document.documentElement.getAttribute('data-theme')||'dark') === 'light'; }
  function glowColor(){ return isLight() ? 0x145d6a : 0x47e7ff; }
  // Neon palette (purple → blue → pink → green)
  function neonPalette(){
    return [
      new THREE.Color(0x7c7cff), // purple/indigo
      new THREE.Color(0x47e7ff), // blue/cyan
      new THREE.Color(0xff6ad5), // pink
      new THREE.Color(0x16f2b3)  // green
    ];
  }
  function hash01(i){ const s = Math.sin(i*127.1)*43758.5453; return s - Math.floor(s); }
  function samplePalette(t){
    const pal = neonPalette();
    const segs = pal.length - 1;
    const x = Math.min(0.9999, Math.max(0, t));
    const k = Math.floor(x * segs);
    const f = x * segs - k;
    return pal[k].clone().lerp(pal[k+1], f);
  }
  const circleTexDark = makeCircleTexture();
  const circleTexLight = makeCircleTexture({ light: true });
  const mat = new THREE.PointsMaterial({
    size: isLight() ? 0.04 : 0.032,
    color: 0xffffff,
    map: isLight() ? circleTexLight : circleTexDark,
    transparent: true,
    opacity: 0.98,
    alphaTest: 0.02,
    depthWrite: false,
    blending: isLight() ? THREE.NormalBlending : THREE.AdditiveBlending,
    sizeAttenuation: true,
    vertexColors: true
  });
  const points = new THREE.Points(geo, mat);
  scene.add(points);

  // Secondary halo particle layer for extra glow
  const haloPositions = new Float32Array(count * 3);
  const haloGeo = new THREE.BufferGeometry();
  haloGeo.setAttribute('position', new THREE.BufferAttribute(haloPositions, 3));
  const haloMat = new THREE.PointsMaterial({
    size: isLight() ? 0.06 : 0.05,
    color: 0xffffff,
    map: isLight() ? circleTexLight : circleTexDark,
    transparent: true,
    opacity: isLight() ? 0.42 : 0.38,
    alphaTest: 0.02,
    depthWrite: false,
    blending: isLight() ? THREE.NormalBlending : THREE.AdditiveBlending,
    sizeAttenuation: true,
    vertexColors: true
  });
  const halo = new THREE.Points(haloGeo, haloMat);
  scene.add(halo);

  // Subtle inner glow
  const glowGeo = new THREE.SphereGeometry(sphereR*0.96, 32, 32);
  const glowMat = new THREE.MeshBasicMaterial({ color: glowColor(), transparent:true, opacity:0.08, blending: THREE.AdditiveBlending, depthWrite:false });
  const glow = new THREE.Mesh(glowGeo, glowMat);
  scene.add(glow);

  // (No wireframe; cleaner particle look)

  // Helpers
  const easeInOutCubic = (t)=> t<0.5 ? 4*t*t*t : 1 - Math.pow(-2*t+2,3)/2;
  function rand(min,max){ return min + Math.random()*(max-min); }
  function unitVec(){
    const u = Math.random();
    const v = Math.random();
    const theta = 2*Math.PI*u; const phi = Math.acos(2*v-1);
    return new THREE.Vector3(
      Math.sin(phi)*Math.cos(theta),
      Math.cos(phi),
      Math.sin(phi)*Math.sin(theta)
    );
  }

  // Targets
  const sphereTarget = new Float32Array(count*3);
  (function buildSphere(){
    for (let i=0;i<count;i++){
      const t = i / count;
      const phi = Math.acos(1 - 2*t);
      const theta = Math.PI * (1 + Math.sqrt(5)) * i;
      const x = sphereR * Math.sin(phi) * Math.cos(theta);
      const y = sphereR * Math.cos(phi);
      const z = sphereR * Math.sin(phi) * Math.sin(theta);
      sphereTarget[i*3] = x; sphereTarget[i*3+1] = y; sphereTarget[i*3+2] = z;
    }
  })();

  const circleTarget = new Float32Array(count*3);
  (function buildCircle(){
    const R = 0.7; // radius of center circle
    for(let i=0;i<count;i++){
      const r = Math.sqrt(Math.random())*R; // uniform disc
      const a = Math.random()*Math.PI*2;
      circleTarget[i*3] = r*Math.cos(a);
      circleTarget[i*3+1] = r*Math.sin(a);
      circleTarget[i*3+2] = rand(-0.02, 0.02); // slight thickness
    }
  })();

  const heartTarget = new Float32Array(count*3);
  ;(function buildHeart(){
    // Fill an implicit heart, then center and normalize size
    const pts = [];
    const triesMax = count*40; // more attempts for a better fill
    let tries=0;
    while(pts.length < count && tries < triesMax){
      tries++;
      const x = rand(-1.6, 1.6);
      const y = rand(-1.8, 1.6);
      const v = Math.pow(x*x + y*y - 1, 3) - x*x*Math.pow(y,3);
      if(v <= 0){ pts.push([x, y]); }
    }
    if(pts.length === 0){
      // Fallback: small circle
      for(let i=0;i<count;i++){
        const a = (i/count)*Math.PI*2; const r=0.6;
        heartTarget[i*3]=r*Math.cos(a); heartTarget[i*3+1]=r*Math.sin(a); heartTarget[i*3+2]=0;
      }
      return;
    }
    // Center
    const mean = pts.reduce((acc,p)=>{acc.x+=p[0]; acc.y+=p[1]; return acc;},{x:0,y:0});
    mean.x/=pts.length; mean.y/=pts.length;
    for(let i=0;i<pts.length;i++){ pts[i][0]-=mean.x; pts[i][1]-=mean.y; }
    // Normalize to target radius
    let maxR=0; for(const p of pts){ const r=Math.hypot(p[0],p[1]); if(r>maxR) maxR=r; }
    const targetR = 0.8; // roughly match globe/circle sizing
    const s = maxR>0 ? (targetR/maxR) : 1;
    for(let i=0;i<count;i++){
      const p = pts[i % pts.length];
      heartTarget[i*3] = p[0]*s;
      heartTarget[i*3+1] = p[1]*s;
      heartTarget[i*3+2] = rand(-0.02,0.02);
    }
  })();

  const spreadTarget = new Float32Array(count*3);
  (function buildSpread(){
    for(let i=0;i<count;i++){
      const dir = unitVec();
      const r = rand(sphereR*1.6, sphereR*2.6);
      const jitter = unitVec().multiplyScalar(rand(0,0.25));
      const p = dir.multiplyScalar(r).add(jitter);
      spreadTarget[i*3]=p.x; spreadTarget[i*3+1]=p.y; spreadTarget[i*3+2]=p.z;
    }
  })();

  // Initialize positions to sphere
  positions.set(sphereTarget);
  geo.attributes.position.needsUpdate = true;

  // Build neon per-vertex colors for core and halo
  (function buildColors(){
    const colors = new Float32Array(count*3);
    const hcolors = new Float32Array(count*3);
    for(let i=0;i<count;i++){
      let t = (i / count) + hash01(i) * 0.33;
      t = t - Math.floor(t);
      const c = samplePalette(t);
      const ch = samplePalette((t + 0.1) % 1);
      colors[i*3] = c.r; colors[i*3+1] = c.g; colors[i*3+2] = c.b;
      hcolors[i*3] = ch.r; hcolors[i*3+1] = ch.g; hcolors[i*3+2] = ch.b;
    }
    geo.setAttribute('color', new THREE.BufferAttribute(colors, 3));
    haloGeo.setAttribute('color', new THREE.BufferAttribute(hcolors, 3));
  })();

  // Initialize halo slightly larger and fuzzier than the core
  (function initHalo(){
    for(let i=0;i<count;i++){
      const j = i*3;
      const v = new THREE.Vector3(sphereTarget[j], sphereTarget[j+1], sphereTarget[j+2]);
      v.multiplyScalar(1.04 + Math.random()*0.06);
      v.addScaledVector(unitVec(), Math.random()*0.08);
      haloPositions[j] = v.x; haloPositions[j+1] = v.y; haloPositions[j+2] = v.z;
    }
    haloGeo.attributes.position.needsUpdate = true;
  })();

  // Resize to hero container
  function resize(){
    const rect = canvas.getBoundingClientRect();
    const w = rect.width || canvas.clientWidth || 800;
    const h = rect.height || canvas.clientHeight || 450;
    renderer.setSize(w, h, false);
    camera.aspect = w / Math.max(1,h);
    camera.updateProjectionMatrix();
  }
  resize();
  window.addEventListener('resize', resize);

  // Morph engine
  let raf;
  let rotating = false; // keep perspective fixed unless reduced motion idle is desired
  function tweenTo(target, duration=1500){
    return new Promise(resolve=>{
      if(reduceMotion){ positions.set(target); geo.attributes.position.needsUpdate = true; resolve(); return; }
      const start = performance.now();
      const from = positions.slice(0); // snapshot current
      const haloFrom = haloPositions.slice(0);
      function step(now){
        const t = Math.min(1, (now - start)/duration);
        const e = easeInOutCubic(t);
        for(let i=0;i<positions.length;i++){
          positions[i] = from[i] + (target[i]-from[i]) * e;
        }
        geo.attributes.position.needsUpdate = true;
        // Make halo follow with a slight lag and expansion
        for(let i=0;i<haloPositions.length;i++){
          const trg = target[i] * 1.035; // slightly larger radius
          haloPositions[i] = haloFrom[i] + (trg - haloFrom[i]) * (e*0.85);
        }
        haloGeo.attributes.position.needsUpdate = true;
        if(t < 1){ requestAnimationFrame(step); } else { resolve(); }
      }
      requestAnimationFrame(step);
    });
  }

  const stageEl = document.getElementById('stageText');
  function showStage(text, dwell=900){
    if(!stageEl) return wait(dwell);
    stageEl.textContent = text;
    stageEl.classList.add('show');
    return wait(dwell).then(()=> stageEl.classList.remove('show'));
  }

  async function runSequence(){
    // Stage 1: Complexity → Clarity (globe → circle)
    const d1 = reduceMotion ? 400 : 1600;
    await Promise.all([
      tweenTo(circleTarget, d1),
      showStage('Complexity into clarity', d1 + 120)
    ]);
    await wait(220);
    // Stage 2: Noise → Narrative (circle → heart)
    const d2 = reduceMotion ? 400 : 1600;
    await Promise.all([
      tweenTo(heartTarget, d2),
      showStage('Noise into narrative', d2 + 120)
    ]);
    await wait(220);
    // Stage 3: Ideas → Impact (heart → spread)
    const d3 = reduceMotion ? 500 : 1800;
    await Promise.all([
      tweenTo(spreadTarget, d3),
      showStage('Ideas to impact', d3 + 120)
    ]);
    await wait(500);
    // Reform globe and loop
    await tweenTo(sphereTarget, 1800);
    await wait(1000);
    runSequence();
  }

  function wait(ms){ return new Promise(r=> setTimeout(r, ms)); }

  // Animation loop
  function tick(){
    if(rotating){
      points.rotation.y += reduceMotion ? 0.0001 : 0.0006;
      points.rotation.x += reduceMotion ? 0.00002 : 0.0002;
  glow.rotation.copy(points.rotation);
      halo.rotation.copy(points.rotation);
    }
    renderer.render(scene, camera);
    raf = requestAnimationFrame(tick);
  }
  tick();

  // Start sequence; keep perspective fixed
  setTimeout(runSequence, 600);

  // Update sizes/opacities, blending, and glow when theme changes
  function applyThemeToMaterials(){
    glow.material.color.setHex(glowColor());
    // Adjust sizes/opacities and maps for light theme
    const light = isLight();
    mat.size = light ? 0.04 : 0.032;
    mat.opacity = light ? 1.0 : 0.98;
    mat.map = light ? circleTexLight : circleTexDark;
    mat.blending = light ? THREE.NormalBlending : THREE.AdditiveBlending;
    mat.needsUpdate = true;

    haloMat.size = light ? 0.06 : 0.05;
    haloMat.opacity = light ? 0.42 : 0.38;
    haloMat.map = light ? circleTexLight : circleTexDark;
    haloMat.blending = light ? THREE.NormalBlending : THREE.AdditiveBlending;
    haloMat.needsUpdate = true;
    renderer.render(scene, camera);
  }
  const mo = new MutationObserver(applyThemeToMaterials);
  mo.observe(document.documentElement, { attributes:true, attributeFilter:['data-theme'] });
  // Also apply once on boot in case of late initialization
  applyThemeToMaterials();

  window.addEventListener('beforeunload', ()=> cancelAnimationFrame(raf));
})();
</script>
<script>
// Theme toggle behavior
(function(){
  const btn = document.getElementById('themeToggle');
  if(!btn) return;
  btn.addEventListener('click', ()=>{
    const current = document.documentElement.getAttribute('data-theme') || 'dark';
    const next = current === 'dark' ? 'light' : 'dark';
    document.documentElement.setAttribute('data-theme', next);
    try{ localStorage.setItem('theme', next); }catch(e){}
  });
})();
</script>
<script>
// Scene frames: apply theme-specific images and animate timecodes per card
(function(){
  const reduceMotion = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
  function isLight(){ return (document.documentElement.getAttribute('data-theme')||'dark') === 'light'; }
  function applySceneImages(){
    document.querySelectorAll('#capabilities .scene-card').forEach(card=>{
      const frame = card.querySelector('.frame');
      if(!frame) return;
      const url = isLight() ? card.getAttribute('data-img-light') : card.getAttribute('data-img-dark');
      if(url){
        frame.style.backgroundImage = `url("${url}")`;
        frame.style.backgroundSize = 'cover';
        frame.style.backgroundPosition = 'center';
      }
    });
  }
  const mo = new MutationObserver(applySceneImages);
  mo.observe(document.documentElement, { attributes:true, attributeFilter:['data-theme'] });
  applySceneImages();

  // Scene frames: keep original non-flip structure

  // Timecode helpers
  const pad = (n)=> String(n).padStart(2, '0');
  function formatTC(ms, fps){
    const totalFrames = Math.floor(ms/1000 * fps);
    const frames = totalFrames % fps;
    const secs = Math.floor(ms/1000) % 60;
    const mins = Math.floor(ms/60000) % 60;
    const hours = Math.floor(ms/3600000);
    return `${pad(hours)}:${pad(mins)}:${pad(secs)}:${pad(frames)}`;
  }
  // Initialize random start times and animate
  const fps = 24;
  const cards = Array.from(document.querySelectorAll('#capabilities .scene-card'));
  cards.forEach((card, i)=>{
    const tcEl = card.querySelector('.tc');
    if(!tcEl) return;
    // Random base time: 0–2 hours, 0–59 minutes, 0–59 seconds, random frame
    const hours = 0; // keep hours short for readability
    const mins = Math.floor(Math.random()*60);
    const secs = Math.floor(Math.random()*60);
    const frames = Math.floor(Math.random()*fps);
    const baseMs = ((hours*3600 + mins*60 + secs) * 1000) + Math.floor(frames * (1000/fps));
    let start = performance.now();
    let rafId;
    function tick(now){
      const elapsed = now - start;
      const ms = baseMs + (elapsed);
      tcEl.textContent = formatTC(ms, fps);
      rafId = requestAnimationFrame(tick);
    }
    if(reduceMotion){
      tcEl.textContent = formatTC(baseMs, fps);
    }else{
      rafId = requestAnimationFrame(tick);
      card.addEventListener('remove', ()=> cancelAnimationFrame(rafId), { once:true });
    }
  });
  // KPI count-up when highlights comes into view
  function animateKpis(){
    const nums = document.querySelectorAll('#highlights .kpi-number');
    nums.forEach(num=>{
      if(num.dataset.animated) return;
      const target = parseFloat(num.getAttribute('data-target')||'0');
      if(!isFinite(target)) return;
      if(reduceMotion){ num.textContent = String(target); num.dataset.animated = '1'; return; }
      const dur = 1200 + Math.random()*600;
      const start = performance.now();
      const from = 0;
      function step(now){
        const t = Math.min(1, (now-start)/dur);
        const e = t<0.5 ? 4*t*t*t : 1 - Math.pow(-2*t+2,3)/2; // easeInOutCubic
        const val = Math.round(from + (target - from) * e);
        num.textContent = String(val);
        if(t < 1){ requestAnimationFrame(step); } else { num.dataset.animated = '1'; }
      }
      requestAnimationFrame(step);
    });
  }
  const highlights = document.getElementById('highlights');
  if(highlights){
    const kpiIo = new IntersectionObserver((entries)=>{
      entries.forEach(e=>{ if(e.isIntersecting){ animateKpis(); kpiIo.disconnect(); } });
    }, { root: document.getElementById('snapper'), threshold: 0.3 });

    // Enable flip interactions on KPI cards for click/keyboard (hover handled in CSS)
    document.querySelectorAll('#highlights .kpi-card .flip-inner').forEach(inner=>{
      const card = inner.closest('.kpi-card');
      if(!card) return;
      function toggle(){ const on = card.classList.toggle('flipped'); inner.setAttribute('aria-pressed', on ? 'true':'false'); }
      inner.addEventListener('click', (e)=>{ e.stopPropagation(); toggle(); });
      inner.addEventListener('keydown', (e)=>{
        if(e.key === 'Enter' || e.key === ' '){ e.preventDefault(); toggle(); }
        if(e.key === 'Escape' && card.classList.contains('flipped')){ card.classList.remove('flipped'); inner.setAttribute('aria-pressed','false'); }
      });
    });
    kpiIo.observe(highlights);
  }

  // Toolkits: interactive cards (hover glow + pin on click/keyboard)
  (function(){
    const reduceMotion = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    const cards = Array.from(document.querySelectorAll('#skills .toolkit-card'));
    if(!cards.length) return;
    function setActive(card, on){
      cards.forEach(c=>{
        if(c===card){ c.classList.toggle('active', on); c.setAttribute('aria-pressed', on ? 'true':'false'); }
        else { c.classList.remove('active'); c.setAttribute('aria-pressed','false'); }
      });
    }
    cards.forEach(card=>{
      card.addEventListener('click', (e)=>{
        e.stopPropagation();
        const on = !card.classList.contains('active');
        setActive(card, on);
      });
      card.addEventListener('keydown', (e)=>{
        if(e.key==='Enter' || e.key===' '){ e.preventDefault(); setActive(card, !card.classList.contains('active')); }
        if(e.key==='Escape' && card.classList.contains('active')){ setActive(card, false); }
      });
    });
    // Clicking outside unpins
    document.addEventListener('click', (e)=>{
      if(!e.target.closest('#skills .toolkit-card')){ cards.forEach(c=> c.classList.remove('active')); cards.forEach(c=> c.setAttribute('aria-pressed','false')); }
    });

    // Randomize motion/direction/scale per card
    const seed = Date.now() % 10000;
    cards.forEach((card, i)=>{
      // simple deterministic per-card seed from session seed
      let s = (seed + i*101) >>> 0;
      const rnd = (min, max)=>{
        // xorshift32
        s ^= s << 13; s ^= s >>> 17; s ^= s << 5; s >>>= 0;
        const u = (s & 0xfffffff) / 0xfffffff; // 0..1
        return min + u*(max-min);
      };
      const spinDur = rnd(6, 14).toFixed(2) + 's';

    // Compose obfuscated contact email on interaction to hide in static HTML
    (function(){
      const el = document.getElementById('contactEmail');
      if(!el) return;
      const u = el.getAttribute('data-user');
      const d = el.getAttribute('data-domain');
      const addr = `${u}@${d}`;
      el.title = addr;
      function setMailto(){ el.setAttribute('href', `mailto:${addr}`); }
      el.addEventListener('pointerdown', setMailto, { once:true });
      el.addEventListener('keydown', (e)=>{ if(e.key==='Enter' || e.key===' '){ setMailto(); } });
    })();

    // Custom cursor controller: gradient rounded-corner diamond
    (function(){
      if(!(window.matchMedia && window.matchMedia('(hover:hover) and (pointer:fine)').matches)) return;
      const reduceMotion = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      const d = document.createElement('div'); d.id = 'cursorDiamond'; document.body.appendChild(d);
      let x = window.innerWidth/2, y = window.innerHeight/2; let vx=0, vy=0; let raf;
      function move(e){ x = e.clientX; y = e.clientY; d.style.left = x+'px'; d.style.top = y+'px'; }
      function setIntent(on){ document.body.classList.toggle('cursor-intent', !!on); }
      function setPress(on){ document.body.classList.toggle('cursor-press', !!on); }
      function setDrag(on){ document.body.classList.toggle('cursor-drag', !!on); }
      // Pointer events
      window.addEventListener('pointermove', move, { passive: true });
      window.addEventListener('pointerdown', (e)=>{ if(e.isPrimary) setPress(true); }, { passive: true });
      window.addEventListener('pointerup', ()=> setPress(false), { passive: true });
      // Hover intent on interactive elements
      function isInteractive(el){
        return !!(el.closest('a, button, [role="button"], .btn, input, select, textarea, [contenteditable="true"], .reviews-wrap'));
      }
      window.addEventListener('pointermove', (e)=>{
        setIntent(isInteractive(e.target));
      }, { passive: true });
      // Integrate with reviews dragging state to dim cursor
      const reviewsArea = document.querySelector('.reviews-wrap');
      if(reviewsArea){
        reviewsArea.addEventListener('pointerdown', ()=> setDrag(true));
        reviewsArea.addEventListener('pointerup', ()=> setDrag(false));
        reviewsArea.addEventListener('pointercancel', ()=> setDrag(false));
        reviewsArea.addEventListener('mouseleave', ()=> setDrag(false));
      }
      // Hide diamond while over form text inputs where native cursor is expected
      document.addEventListener('pointermove', (e)=>{
        const isText = !!e.target.closest('input[type="text"], input[type="search"], textarea, [contenteditable="true"]');
        d.style.opacity = isText ? '0' : '';
      }, { passive: true });
      // Cleanup on unload
      window.addEventListener('beforeunload', ()=>{ d.remove(); });
    })();
      const spinDir = ((s & 1) ? 'reverse' : 'normal');
      const spinDelay = (rnd(-2, 2)).toFixed(2) + 's';
      const ringOffset = rnd(0, 360).toFixed(1) + 'deg';
      const ringOpacity = rnd(0.18, 0.32).toFixed(2);
      const ringOpacityHover = Math.min(0.6, parseFloat(ringOpacity) + 0.2).toFixed(2);
      const glowOpacity = rnd(0.14, 0.26).toFixed(2);
      const glowOpacityHover = Math.min(0.5, parseFloat(glowOpacity) + 0.16).toFixed(2);
      const lift = rnd(0.5, 2.0).toFixed(2) + 'px';
      const ringScale = rnd(0.98, 1.06).toFixed(3);
      const glowScale = rnd(0.98, 1.03).toFixed(3);
      // Apply
      card.style.setProperty('--ringOpacity', ringOpacity);
      card.style.setProperty('--ringOpacityHover', ringOpacityHover);
      card.style.setProperty('--glowOpacity', glowOpacity);
      card.style.setProperty('--glowOpacityHover', glowOpacityHover);
      card.style.setProperty('--lift', lift);
      card.style.setProperty('--ringScale', ringScale);
      card.style.setProperty('--glowScale', glowScale);
      card.style.setProperty('--ringOffset', ringOffset);
      if(!reduceMotion){
        card.style.setProperty('--spinDur', spinDur);
        card.style.setProperty('--spinDir', spinDir);
        card.style.setProperty('--spinDelay', spinDelay);
      }
    });
  })();
})();
</script>
</body>
</html>